webpackJsonp([1],{"./node_modules/babel-loader/lib/index.js!./node_modules/vue-loader/lib/selector.js?type=script&index=0!./src/board.vue":function(e,t,r){"use strict";var n=r("./node_modules/babel-runtime/core-js/get-iterator.js"),s=r.n(n),i=r("./node_modules/deep-equal/index.js"),o=r.n(i),a=r("./node_modules/web-animations-js/web-animations.min.js"),l=(r.n(a),r("./src/model/chess/board.js")),u=r("./src/cell.vue"),c=r("./src/ui-utils/svg-effects/shadow.vue");t.a={components:{Cell:u.a,ShadowSvg:c.a},props:{size:{type:Number,default:8},model:{required:!0,type:l.a},lastMove:{type:Object,default:null},selectedPiece:{type:Object,default:null}},data:function(){return{lastMoveUpdated:null!==this.lastMove,movingPiecePrevBoundRects:[]}},watch:{lastMove:function(){this.lastMoveUpdated=!0}},beforeUpdate:function(){null!==this.lastMove&&this.lastMoveUpdated&&(this.preAnimatePieceMoving(this.lastMove.piece,this.lastMove.from),null!=this.lastMove.castling&&this.preAnimatePieceMoving(this.lastMove.castling.piece,this.lastMove.castling.from),this.preAnimatePieceCapturing(this.lastMove.capture))},updated:function(){null!==this.lastMove&&this.lastMoveUpdated&&(this.animatePieceMoving(this.lastMove.piece,this.lastMove.to),null!=this.lastMove.castling&&this.animatePieceMoving(this.lastMove.castling.piece,this.lastMove.castling.to),this.lastMoveUpdated=!1)},methods:{cell:function(e,t){return this.model.cells[t][e]},cellVm:function(e,t){return this.$refs.cells[e*this.size+t]},pieceVm:function(e,t,r){return this.cellVm(t,r).$refs.pieces.find(function(t){return t.model===e})},isCellHighLighted:function(e,t){return null!=this.lastMove&&(o()(this.lastMove.from,{x:e,y:t})||o()(this.lastMove.to,{x:e,y:t}))},onCellClicked:function(e,t){this.$emit("cell-clicked",{x:e,y:t})},onPieceClicked:function(e,t,r){this.$emit("piece-clicked",e,{x:t,y:r})},preAnimatePieceMoving:function(e,t){var r=this.pieceVm(e,t.x,t.y);null!=r&&(this.movingPiecePrevBoundRects[e.id]=r.$el.getBoundingClientRect())},animatePieceMoving:function(e,t){if(null!=this.movingPiecePrevBoundRects[e.id]){var r=this.pieceVm(e,t.x,t.y);if(null!=r){var n=r.$el.getBoundingClientRect(),s=this.movingPiecePrevBoundRects[e.id].left-n.left,i=this.movingPiecePrevBoundRects[e.id].top-n.top,o=[{transform:"translate("+s+"px,"+i+"px)"},{transform:"translate(0,0)"}],a={duration:125,easing:"ease-in-out"};r.$el.animate(o,a)}this.movingPiecePrevBoundRects[e.id]=null}},preAnimatePieceCapturing:function(e){if(null!=e){var t=!0,r=!1,n=void 0;try{for(var i,o=s()(e.pieces);!(t=(i=o.next()).done);t=!0){var a=i.value,l=this.pieceVm(a,e.cell.x,e.cell.y);null!=l&&(l.$el.captured=!0)}}catch(e){r=!0,n=e}finally{try{!t&&o.return&&o.return()}finally{if(r)throw n}}}}}}},"./node_modules/babel-loader/lib/index.js!./node_modules/vue-loader/lib/selector.js?type=script&index=0!./src/burger-menu.vue":function(e,t,r){"use strict";function n(e){return null==e.offsetParent}t.a={props:{items:{type:Array,default:function(){return[]}}},data:function(){return{isMenuOpened:!1}},methods:{onItemClick:function(e){this.isMenuOpened&&this.$emit("item-click",e)},onMenuOpenedOrClosed:function(e){"background-color"===e.propertyName&&(this.isMenuOpened=n(this.$refs.burger))}}}},"./node_modules/babel-loader/lib/index.js!./node_modules/vue-loader/lib/selector.js?type=script&index=0!./src/cell.vue":function(e,t,r){"use strict";var n=r("./src/pieces/piece-svg.vue"),s=r("./src/pieces/captured-transition.js");t.a={components:{Piece:n.a,CapturedTransition:s.a},props:{model:{required:!0,type:Object},highlighted:{default:!1,type:Boolean},selectedPiece:{default:null,type:Object}},methods:{isPieceSelected:function(e){return null!==this.selectedPiece&&e===this.selectedPiece},onPieceClicked:function(e){this.$emit("piece-clicked",e)}}}},"./node_modules/babel-loader/lib/index.js!./node_modules/vue-loader/lib/selector.js?type=script&index=0!./src/game-result.vue":function(e,t,r){"use strict";var n=r("./src/ui-utils/notification.vue");t.a={components:{Notification:n.a},props:{result:{type:Object,default:null}},computed:{message:function(){if(null==this.result)return"";var e=null!=this.result.reason?" by "+this.result.reason:"";return(this.result.draw?"draw":this.result.winPlr.name+" won")+e+"!"}}}},"./node_modules/babel-loader/lib/index.js!./node_modules/vue-loader/lib/selector.js?type=script&index=0!./src/game.vue":function(e,t,r){"use strict";var n=r("./node_modules/babel-runtime/regenerator/index.js"),s=r.n(n),i=r("./node_modules/babel-runtime/helpers/asyncToGenerator.js"),o=r.n(i),a=r("./node_modules/babel-runtime/core-js/get-iterator.js"),l=r.n(a),u=r("./src/utils/wait.js"),c=r("./node_modules/vue/dist/vue.runtime.esm.js"),d=r("./src/model/chess/game.js"),m=r("./src/ui-player.js"),p=r("./src/online-game-factory.js"),f=r("./src/offline-game-factory.js"),v=r("./src/board.vue"),h=r("./src/burger-menu.vue"),b=r("./src/game-result.vue"),x=r("./src/ui-utils/notification.vue"),y=r("./src/player-panel.vue"),g=r("./src/pieces/sounds/move.mp3"),_=r.n(g),j=r("./src/pieces/sounds/captured.mp3"),k=r.n(j),w=r("./src/pieces/sounds/rejected.mp3"),C=r.n(w),P=r("./src/pieces/sounds/check.mp3"),M=r.n(P),I=new Audio(_.a),R=new Audio(k.a),$=new Audio(C.a),E=new Audio(M.a),z={message:"Something gone wrong.",severity:"error"};t.a={components:{Board:v.a,BurgerMenu:h.a,GameResult:b.a,Notification:x.a,PlayerPanel:y.a},props:{db:{required:!0,type:Object},user:{type:Object,default:null}},data:function(){return{game:new d.a,menuItems:[{text:"New online game",value:"new-online"},{text:"New offline game",value:"new-offline"}],selectedPiece:null,gameResult:null,onlineGameFactory:new p.a(this.db,this),offlineGameFactory:new f.a(this),notificationMessage:"",isOnlineGame:!1,isOnlineGameCanceled:!1}},computed:{lastMove:function(){return this.game.log.length>0?this.game.log[this.game.log.length-1].move:null},topPlayer:function(){return null!=this.game&&this.game.plrs.length>1?this.game.plrs[1]:null},bottomPlayer:function(){return null!=this.game&&this.game.plrs.length>0?this.game.plrs[0]:null},isUndoAvailable:function(){return!this.isOnlineGame&&this.game.log.length>0&&!this.game.isEnded},isResignAvailable:function(){return!this.game.isEnded&&this.game.plrs.length>1&&this.isOnlineGame}},methods:{startGame:function(e){var t=this;this.gameResult=null,this.attachGameEventHandlers(e),this.attachPlayerEventHandlres(e.plrs),this.game=e,c.a.nextTick(function(){t.game.run(),I.play(),t.setPiecesToJoyExpression()})},attachPlayerEventHandlres:function(e){var t=this,r=!0,n=!1,s=void 0;try{for(var i,o=l()(e);!(r=(i=o.next()).done);r=!0){var a=i.value;a instanceof m.a&&a.pieceSelectedEvent.on(function(e){t.selectedPiece=e})}}catch(e){n=!0,s=e}finally{try{!r&&o.return&&o.return()}finally{if(n)throw s}}},attachGameEventHandlers:function(e){var t=this;e.moveAcceptedEvent.on(function(e,r){t.selectedPiece=null;var n=t.game.opponentPlayer(e);(t.game.isKingInCheck(n)?E:I).play(),null!=r.capture&&r.capture.pieces.length>0&&R.play(),t.handleKingInCheck()}),e.moveRejectedEvent.on(function(){t.selectedPiece=null,$.play()}),e.lastMoveUndoneEvent.on(function(){t.selectedPiece=null,I.play(),t.handleKingInCheck()}),e.gameEndedEvent.on(function(){var e=o()(s.a.mark(function e(r){return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(u.a)(500);case 2:t.gameResult=r;case 3:case"end":return e.stop()}},e,t)}));return function(t){return e.apply(this,arguments)}}())},onUndoClick:function(){this.$emit("undo-click")},onResignClick:function(){this.$emit("resign-click")},onMenuItemClick:function(){function e(e){return t.apply(this,arguments)}var t=o()(s.a.mark(function e(t){var r,n;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:this.game.stop(),e.t0=t.value,e.next="new-offline"===e.t0?4:"new-online"===e.t0?10:27;break;case 4:return this.isOnlineGame=!1,this.isOnlineGameCanceled=!0,this.notificationMessage="",r=this.offlineGameFactory.create(),this.startGame(r),e.abrupt("break",27);case 10:if("Waiting for opponent ..."==this.notificationMessage){e.next=26;break}return this.isOnlineGame=!0,this.isOnlineGameCanceled=!1,this.notificationMessage="Waiting for opponent ...",this.game=new d.a,e.prev=15,e.next=18,this.onlineGameFactory.create(this.user);case 18:n=e.sent,this.isOnlineGameCanceled||(this.notificationMessage="",this.startGame(n)),e.next=26;break;case 22:e.prev=22,e.t1=e.catch(15),console.error(e.t1),this.notificationMessage=z;case 26:return e.abrupt("break",27);case 27:case"end":return e.stop()}},e,this,[[15,22]])}));return e}(),handleKingInCheck:function(){var e=this;c.a.nextTick(function(){var t=!0,r=!1,n=void 0;try{for(var s,i=l()(e.game.plrs);!(t=(s=i.next()).done);t=!0){var o=s.value,a=e.game.isKingInCheck(o),u=!0,c=!1,d=void 0;try{for(var m,p=l()(e.game.board.findPiecesOfColor(o.color));!(u=(m=p.next()).done);u=!0){var f=m.value;e.$refs.board.pieceVm(f.piece,f.x,f.y).stickToFearExpresion=a}}catch(e){c=!0,d=e}finally{try{!u&&p.return&&p.return()}finally{if(c)throw d}}}}catch(e){r=!0,n=e}finally{try{!t&&i.return&&i.return()}finally{if(r)throw n}}})},setPiecesToJoyExpression:function(){var e=!0,t=!1,r=void 0;try{for(var n,s=l()(this.game.plrs);!(e=(n=s.next()).done);e=!0){var i=n.value,o=!0,a=!1,u=void 0;try{for(var c,d=l()(this.game.board.findPiecesOfColor(i.color));!(o=(c=d.next()).done);o=!0){var m=c.value,p=this.$refs.board.pieceVm(m.piece,m.x,m.y);p.faceExpr="joy",p.stickToFearExpresion=!1}}catch(e){a=!0,u=e}finally{try{!o&&d.return&&d.return()}finally{if(a)throw u}}}}catch(e){t=!0,r=e}finally{try{!e&&s.return&&s.return()}finally{if(t)throw r}}}}}},"./node_modules/babel-loader/lib/index.js!./node_modules/vue-loader/lib/selector.js?type=script&index=0!./src/main.vue":function(e,t,r){"use strict";var n=r("./node_modules/babel-runtime/core-js/json/stringify.js"),s=r.n(n),i=r("./node_modules/uuid/index.js"),o=r.n(i),a=r("./node_modules/firebase/index.js"),l=r.n(a),u=r("./node_modules/firebase/firestore/index.js"),c=(r.n(u),r("./src/game.vue")),d=r("./src/ui-utils/prompt.vue");l.a.initializeApp({apiKey:"AIzaSyC-63ApL_7XETn31Xp2cl3xDwATy-l2HYw",authDomain:"chess-d790f.firebaseapp.com",projectId:"chess-d790f"}),t.a={components:{Game:c.a,Prompt:d.a},data:function(){return{db:l.a.firestore(),user:null}},created:function(){this.user=this.getUserFromLocalStorage()},methods:{createUser:function(e){this.user={id:o()(),name:e.trim()},this.saveUserToLocalStorage(this.user)},getUserFromLocalStorage:function(){try{var e=localStorage.getItem("user");if(null!=e)return JSON.parse(e)}catch(e){return null}},saveUserToLocalStorage:function(e){try{var t=s()(e);localStorage.setItem("user",t)}catch(e){}}}}},"./node_modules/babel-loader/lib/index.js!./node_modules/vue-loader/lib/selector.js?type=script&index=0!./src/pieces/face.vue":function(e,t,r){"use strict";var n=r("./src/pieces/face-expressions/joy.svg"),s=r.n(n),i=r("./src/pieces/face-expressions/laugh.svg"),o=r.n(i),a=r("./src/pieces/face-expressions/fear.svg"),l=r.n(a);t.a={components:{Joy:s.a,Laugh:o.a,Fear:l.a},props:{colorClass:{type:String,required:!0},viewBox:{type:String,required:!0},expression:{type:String,default:"joy"}}}},"./node_modules/babel-loader/lib/index.js!./node_modules/vue-loader/lib/selector.js?type=script&index=0!./src/pieces/piece-svg.vue":function(e,t,r){"use strict";var n=r("./node_modules/babel-runtime/regenerator/index.js"),s=r.n(n),i=r("./node_modules/babel-runtime/helpers/asyncToGenerator.js"),o=r.n(i),a=r("./src/utils/wait.js"),l=r("./src/pieces/rook.svg"),u=r.n(l),c=r("./src/pieces/knight.svg"),d=r.n(c),m=r("./src/pieces/bishop.svg"),p=r.n(m),f=r("./src/pieces/pawn.svg"),v=r.n(f),h=r("./src/pieces/queen.svg"),b=r.n(h),x=r("./src/pieces/king.svg"),y=r.n(x),g=r("./src/pieces/face.vue");t.a={components:{Rook:u.a,Knight:d.a,Bishop:p.a,Pawn:v.a,Queen:b.a,King:y.a,Face:g.a},props:{model:{required:!0,type:Object},selected:{type:Boolean,default:!1},svgFilterId:{type:String,default:"url(#shadow)"},faceExpr:{type:String,default:"joy"}},data:function(){return{faceX:0,faceY:0,faceExpression:this.faceExpr,stickToFearExpresion:!1}},computed:{colorInv:function(){return"white"==this.model.color?"black":"white"},viewBox:function(){return this.selected?"3 3 94 94":"-5 -5 110 110"},faceExpressionEff:function(){return this.selected?"laugh":this.stickToFearExpresion?"fear":this.faceExpression}},mounted:function(){function e(){return t.apply(this,arguments)}var t=o()(s.a.mark(function e(){return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(a.a)(5e3);case 2:this.animateFace();case 3:case"end":return e.stop()}},e,this)}));return e}(),methods:{onClick:function(){this.$emit("click",this.model)},animateFace:function(){function e(){return t.apply(this,arguments)}var t=o()(s.a.mark(function e(){var t,r;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=Math.random(),this.stickToFearExpresion||(this.faceExpression=t<.2?"laugh":t<.3?"fear":"joy"),!(t<.8)){e.next=8;break}return this.faceX=0,e.next=6,Object(a.a)(5e3*Math.random()+2e3);case 6:return this.animateFace(),e.abrupt("return");case 8:return r=t>.9?-4:4,this.faceX=r,e.next=12,Object(a.a)(250);case 12:this.animateFace();case 13:case"end":return e.stop()}},e,this)}));return e}()}}},"./node_modules/babel-loader/lib/index.js!./node_modules/vue-loader/lib/selector.js?type=script&index=0!./src/player-panel.vue":function(e,t,r){"use strict";var n=r("./src/model/player.js");t.a={props:{player:{type:n.a,default:null}},computed:{name:function(){return null!=this.player?this.player.name:" "}}}},"./node_modules/babel-loader/lib/index.js!./node_modules/vue-loader/lib/selector.js?type=script&index=0!./src/ui-utils/notification.vue":function(e,t,r){"use strict";var n=r("./node_modules/vue/dist/vue.runtime.esm.js");t.a={props:{message:{type:[String,Object],default:null},hideOnBlur:{type:Boolean,default:!1}},data:function(){return{hide:!1}},computed:{isEmpty:function(){return null==this.msg||""==this.msg},msg:function(){return this.message instanceof Object?this.message.message:this.message},severity:function(){return this.message instanceof Object&&this.message.severity?this.message.severity:"info"}},watch:{message:function(){var e=this;this.hide=!1,n.a.nextTick(function(){e.hideOnBlur&&e.$refs.btn&&e.$refs.btn.focus()})}},methods:{onBlur:function(){this.hideOnBlur&&(this.hide=!0)}}}},"./node_modules/babel-loader/lib/index.js!./node_modules/vue-loader/lib/selector.js?type=script&index=0!./src/ui-utils/prompt.vue":function(e,t,r){"use strict";t.a={props:{message:{type:String,default:""}},data:function(){return{value:""}},computed:{isValueValid:function(){return""!=this.value.trim()}},mounted:function(){this.$refs.input.focus()},methods:{onEnterPressed:function(){this.isValueValid&&this.$refs.button.click()},dismiss:function(){this.$emit("value-entered",this.value)}}}},"./node_modules/babel-loader/lib/index.js!./node_modules/vue-loader/lib/selector.js?type=script&index=0!./src/ui-utils/svg-effects/shadow.vue":function(e,t,r){"use strict";t.a={props:{filterId:{type:String,default:"shadow"},radius:{type:Number,default:2}}}},'./node_modules/extract-text-webpack-plugin/dist/loader.js?{"omit":1,"remove":true}!./node_modules/vue-style-loader/index.js!./node_modules/css-loader/index.js?minimize!./node_modules/vue-loader/lib/style-compiler/index.js?{"vue":true,"id":"data-v-69cf8915","scoped":false,"hasInlineConfig":false}!./node_modules/vue-loader/lib/selector.js?type=styles&index=0!./src/main.vue':function(e,t){},'./node_modules/extract-text-webpack-plugin/dist/loader.js?{"omit":1,"remove":true}!./node_modules/vue-style-loader/index.js!./node_modules/css-loader/index.js?minimize!./node_modules/vue-loader/lib/style-compiler/index.js?{"vue":true,"id":"data-v-81038f84","scoped":true,"hasInlineConfig":false}!./node_modules/vue-loader/lib/selector.js?type=styles&index=0!./src/burger-menu.vue':function(e,t){},'./node_modules/extract-text-webpack-plugin/dist/loader.js?{"omit":1,"remove":true}!./node_modules/vue-style-loader/index.js!./node_modules/css-loader/index.js?{"minimize":true,"localIdentName":"[local]-[hash:base64:5]_0","importLoaders":true,"camelCase":true,"modules":true}!./node_modules/vue-loader/lib/style-compiler/index.js?{"vue":true,"id":"data-v-27c3e224","scoped":false,"hasInlineConfig":false}!./node_modules/vue-loader/lib/selector.js?type=styles&index=0!./src/pieces/piece-svg.vue':function(e,t){e.exports={container:"container-IgJnu_0",white:"white-1AFiz_0",black:"black-17KwY_0",piece:"piece-5dOJh_0"}},'./node_modules/extract-text-webpack-plugin/dist/loader.js?{"omit":1,"remove":true}!./node_modules/vue-style-loader/index.js!./node_modules/css-loader/index.js?{"minimize":true,"localIdentName":"[local]-[hash:base64:5]_0","importLoaders":true,"camelCase":true,"modules":true}!./node_modules/vue-loader/lib/style-compiler/index.js?{"vue":true,"id":"data-v-2a1fb27c","scoped":false,"hasInlineConfig":false}!./node_modules/vue-loader/lib/selector.js?type=styles&index=0!./src/ui-utils/prompt.vue':function(e,t){e.exports={container:"container-2Y7pt_0",input:"input-1kWNl_0",button:"button-2nJZO_0"}},'./node_modules/extract-text-webpack-plugin/dist/loader.js?{"omit":1,"remove":true}!./node_modules/vue-style-loader/index.js!./node_modules/css-loader/index.js?{"minimize":true,"localIdentName":"[local]-[hash:base64:5]_0","importLoaders":true,"camelCase":true,"modules":true}!./node_modules/vue-loader/lib/style-compiler/index.js?{"vue":true,"id":"data-v-2f6f94cd","scoped":false,"hasInlineConfig":false}!./node_modules/vue-loader/lib/selector.js?type=styles&index=0!./src/ui-utils/notification.vue':function(e,t){e.exports={container:"container-2pbRf_0",info:"info-pMpcU_0",error:"error-2VDqF_0"}},'./node_modules/extract-text-webpack-plugin/dist/loader.js?{"omit":1,"remove":true}!./node_modules/vue-style-loader/index.js!./node_modules/css-loader/index.js?{"minimize":true,"localIdentName":"[local]-[hash:base64:5]_0","importLoaders":true,"camelCase":true,"modules":true}!./node_modules/vue-loader/lib/style-compiler/index.js?{"vue":true,"id":"data-v-40a136e6","scoped":false,"hasInlineConfig":false}!./node_modules/vue-loader/lib/selector.js?type=styles&index=0!./src/game.vue':function(e,t){e.exports={menu:"menu-2cENI_0",board:"board-1G1ru_0","game-controls":"game-controls-eaC9e_0",gameControls:"game-controls-eaC9e_0","control-button":"control-button-XaBkD_0",controlButton:"control-button-XaBkD_0","board-container":"board-container-3y0sM_0",boardContainer:"board-container-3y0sM_0",notification:"notification-3c4u-_0"}},'./node_modules/extract-text-webpack-plugin/dist/loader.js?{"omit":1,"remove":true}!./node_modules/vue-style-loader/index.js!./node_modules/css-loader/index.js?{"minimize":true,"localIdentName":"[local]-[hash:base64:5]_0","importLoaders":true,"camelCase":true,"modules":true}!./node_modules/vue-loader/lib/style-compiler/index.js?{"vue":true,"id":"data-v-5d314c2d","scoped":false,"hasInlineConfig":false}!./node_modules/vue-loader/lib/selector.js?type=styles&index=0!./src/cell.vue':function(e,t){e.exports={black:"black-U_Q3a_0",white:"white-1ONzZ_0",highlighted:"highlighted-3cW6__0",piece:"piece-2K9CC_0"}},'./node_modules/extract-text-webpack-plugin/dist/loader.js?{"omit":1,"remove":true}!./node_modules/vue-style-loader/index.js!./node_modules/css-loader/index.js?{"minimize":true,"localIdentName":"[local]-[hash:base64:5]_0","importLoaders":true,"camelCase":true,"modules":true}!./node_modules/vue-loader/lib/style-compiler/index.js?{"vue":true,"id":"data-v-6fde5b2d","scoped":false,"hasInlineConfig":false}!./node_modules/vue-loader/lib/selector.js?type=styles&index=0!./src/board.vue':function(e,t){e.exports={board:"board-1URWu_0",column:"column-Krx6y_0",cell:"cell-kVicP_0"}},'./node_modules/extract-text-webpack-plugin/dist/loader.js?{"omit":1,"remove":true}!./node_modules/vue-style-loader/index.js!./node_modules/css-loader/index.js?{"minimize":true,"localIdentName":"[local]-[hash:base64:5]_0","importLoaders":true,"camelCase":true,"modules":true}!./node_modules/vue-loader/lib/style-compiler/index.js?{"vue":true,"id":"data-v-d9e86bf0","scoped":false,"hasInlineConfig":false}!./node_modules/vue-loader/lib/selector.js?type=styles&index=0!./src/player-panel.vue':function(e,t){e.exports={container:"container-2VxC1_0"}},'./node_modules/extract-text-webpack-plugin/dist/loader.js?{"omit":1,"remove":true}!./node_modules/vue-style-loader/index.js!./node_modules/css-loader/index.js?{"minimize":true,"localIdentName":"[local]-[hash:base64:5]_0","importLoaders":true,"camelCase":true,"modules":true}!./node_modules/vue-loader/lib/style-compiler/index.js?{"vue":true,"id":"data-v-f659458c","scoped":false,"hasInlineConfig":false}!./node_modules/vue-loader/lib/selector.js?type=styles&index=0!./src/pieces/face.vue':function(e,t){e.exports={face:"face-2hk4f_0"}},'./node_modules/vue-loader/lib/template-compiler/index.js?{"id":"data-v-27c3e224","hasScoped":false,"transformToRequire":{"img":"src","image":"xlink:href","object":"data","use":"href"},"preserveWhitespace":false,"buble":{"transforms":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/pieces/piece-svg.vue':function(e,t,r){"use strict";var n=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("svg",{class:e.$style.container,attrs:{viewBox:e.viewBox},on:{click:e.onClick}},[r(e.model.type,{tag:"component",class:[e.$style.piece,e.$style[e.model.color]],attrs:{viewBox:"-8 -8 116 116",filter:e.svgFilterId}}),r("face",{attrs:{colorClass:e.$style[e.colorInv],viewBox:"-8 -8 116 116",expression:e.faceExpressionEff,x:e.faceX,y:e.faceY}})],1)},s=[],i={render:n,staticRenderFns:s};t.a=i},'./node_modules/vue-loader/lib/template-compiler/index.js?{"id":"data-v-2a1fb27c","hasScoped":false,"transformToRequire":{"img":"src","image":"xlink:href","object":"data","use":"href"},"preserveWhitespace":false,"buble":{"transforms":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/ui-utils/prompt.vue':function(e,t,r){"use strict";var n=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("section",{class:e.$style.container},[r("div",[e._v(e._s(e.message))]),r("div",{staticStyle:{width:"100%",display:"flex"}},[r("input",{directives:[{name:"model",rawName:"v-model",value:e.value,expression:"value"}],ref:"input",class:e.$style.input,attrs:{type:"text",maxlength:"32"},domProps:{value:e.value},on:{keyup:function(t){if(!("button"in t)&&e._k(t.keyCode,"enter",13,t.key))return null;e.onEnterPressed(t)},input:function(t){t.target.composing||(e.value=t.target.value)}}}),e.isValueValid?r("button",{ref:"button",class:e.$style.button,on:{click:e.dismiss}},[e._v("\n      OK\n    ")]):e._e()])])},s=[],i={render:n,staticRenderFns:s};t.a=i},'./node_modules/vue-loader/lib/template-compiler/index.js?{"id":"data-v-2f6f94cd","hasScoped":false,"transformToRequire":{"img":"src","image":"xlink:href","object":"data","use":"href"},"preserveWhitespace":false,"buble":{"transforms":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/ui-utils/notification.vue':function(e,t,r){"use strict";var n=function(){var e=this,t=e.$createElement,r=e._self._c||t;return e.isEmpty||e.hide?e._e():r("button",{ref:"btn",class:[e.$style.container,e.$style[e.severity]],on:{blur:e.onBlur}},[r("h1",[e._v(e._s(e.msg))])])},s=[],i={render:n,staticRenderFns:s};t.a=i},'./node_modules/vue-loader/lib/template-compiler/index.js?{"id":"data-v-40a136e6","hasScoped":false,"transformToRequire":{"img":"src","image":"xlink:href","object":"data","use":"href"},"preserveWhitespace":false,"buble":{"transforms":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/game.vue':function(e,t,r){"use strict";var n=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("section",[r("div",{staticStyle:{"text-align":"right"}},[r("player-panel",{attrs:{player:e.topPlayer}})],1),r("burger-menu",{class:e.$style.menu,attrs:{items:e.menuItems},on:{"item-click":e.onMenuItemClick}}),r("div",{class:e.$style.boardContainer},[r("board",{ref:"board",class:e.$style.board,attrs:{model:e.game.board,lastMove:e.lastMove,selectedPiece:e.selectedPiece}}),r("game-result",{class:e.$style.notification,attrs:{result:e.gameResult}}),r("notification",{class:e.$style.notification,attrs:{message:e.notificationMessage}})],1),r("div",{class:e.$style.gameControls},[r("player-panel",{attrs:{player:e.bottomPlayer}}),r("div",{staticClass:"button-panel"},[r("button",{class:e.$style.controlButton,style:{display:e.isUndoAvailable?"":"none"},on:{click:e.onUndoClick}},[e._v("Undo")]),r("button",{class:e.$style.controlButton,style:{display:e.isResignAvailable?"":"none"},on:{click:e.onResignClick}},[e._v("Resign")])])],1)],1)},s=[],i={render:n,staticRenderFns:s};t.a=i},'./node_modules/vue-loader/lib/template-compiler/index.js?{"id":"data-v-5d314c2d","hasScoped":false,"transformToRequire":{"img":"src","image":"xlink:href","object":"data","use":"href"},"preserveWhitespace":false,"buble":{"transforms":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/cell.vue':function(e,t,r){"use strict";var n=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{class:[e.$style.cell,e.$style[e.model.color],e.highlighted?e.$style.highlighted:""],attrs:{file:e.model.file,rank:e.model.rank},on:{click:function(t){e.$emit("click",this)}}},[r("captured-transition",e._l(e.model.pieces,function(t){return r("piece",{key:t.id,ref:"pieces",refInFor:!0,class:e.$style.piece,attrs:{selected:e.isPieceSelected(t),model:t},on:{click:function(r){e.onPieceClicked(t)}}})}))],1)},s=[],i={render:n,staticRenderFns:s};t.a=i},'./node_modules/vue-loader/lib/template-compiler/index.js?{"id":"data-v-69cf8915","hasScoped":false,"transformToRequire":{"img":"src","image":"xlink:href","object":"data","use":"href"},"preserveWhitespace":false,"buble":{"transforms":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/main.vue':function(e,t,r){"use strict";var n=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("main",[null==e.user?r("prompt",{attrs:{message:"Your name?"},on:{"value-entered":e.createUser}}):e._e(),null!=e.user?r("game",{attrs:{db:e.db,user:e.user}}):e._e()],1)},s=[],i={render:n,staticRenderFns:s};t.a=i},'./node_modules/vue-loader/lib/template-compiler/index.js?{"id":"data-v-6a9f1840","hasScoped":false,"transformToRequire":{"img":"src","image":"xlink:href","object":"data","use":"href"},"preserveWhitespace":false,"buble":{"transforms":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/game-result.vue':function(e,t,r){"use strict";var n=function(){var e=this,t=e.$createElement;return(e._self._c||t)("notification",{attrs:{message:e.message,hideOnBlur:!0}})},s=[],i={render:n,staticRenderFns:s};t.a=i},'./node_modules/vue-loader/lib/template-compiler/index.js?{"id":"data-v-6fde5b2d","hasScoped":false,"transformToRequire":{"img":"src","image":"xlink:href","object":"data","use":"href"},"preserveWhitespace":false,"buble":{"transforms":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/board.vue':function(e,t,r){"use strict";var n=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{class:e.$style.container},[r("shadow-svg"),r("div",{class:e.$style.board},e._l(e.size,function(t){return r("div",{key:t,class:e.$style.column},e._l(e.size,function(n){return r("cell",{key:n,ref:"cells",refInFor:!0,class:e.$style.cell,attrs:{model:e.cell(t-1,n-1),highlighted:e.isCellHighLighted(t-1,n-1),selectedPiece:e.selectedPiece},on:{click:function(r){e.onCellClicked(t-1,n-1)},"piece-clicked":function(r){e.onPieceClicked(r,t-1,n-1)}}})}))}))],1)},s=[],i={render:n,staticRenderFns:s};t.a=i},'./node_modules/vue-loader/lib/template-compiler/index.js?{"id":"data-v-81038f84","hasScoped":true,"transformToRequire":{"img":"src","image":"xlink:href","object":"data","use":"href"},"preserveWhitespace":false,"buble":{"transforms":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/burger-menu.vue':function(e,t,r){"use strict";var n=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("nav",{staticClass:"wrapper",attrs:{onclick:"void(0)"},on:{transitionend:function(t){if(t.target!==t.currentTarget)return null;e.onMenuOpenedOrClosed(t)}}},[r("div",{ref:"burger",staticClass:"burger"},[r("div",{staticClass:"burger-stroke"}),r("div",{staticClass:"burger-stroke"}),r("div",{staticClass:"burger-stroke"})]),r("ul",{staticClass:"menu"},e._l(e.items,function(t){return r("li",{key:t.value,staticClass:"menu-item",on:{click:function(r){e.onItemClick(t)}}},[e._v(e._s(t.text))])}))])},s=[],i={render:n,staticRenderFns:s};t.a=i},'./node_modules/vue-loader/lib/template-compiler/index.js?{"id":"data-v-96eee2b2","hasScoped":false,"transformToRequire":{"img":"src","image":"xlink:href","object":"data","use":"href"},"preserveWhitespace":false,"buble":{"transforms":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/ui-utils/svg-effects/shadow.vue':function(e,t,r){"use strict";var n=function(){var e=this,t=e.$createElement;e._self._c;return e._m(0)},s=[function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("svg",{attrs:{width:"0",height:"0"}},[r("defs",[r("filter",{attrs:{id:e.filterId}},[r("feOffset",{attrs:{result:"offOut",in:"SourceAlpha"}}),r("feGaussianBlur",{attrs:{result:"blurOut",in:"offOut",stdDeviation:e.radius}}),r("feBlend",{attrs:{in:"SourceGraphic",in2:"blurOut",mode:"normal"}})],1)])])}],i={render:n,staticRenderFns:s};t.a=i},'./node_modules/vue-loader/lib/template-compiler/index.js?{"id":"data-v-d9e86bf0","hasScoped":false,"transformToRequire":{"img":"src","image":"xlink:href","object":"data","use":"href"},"preserveWhitespace":false,"buble":{"transforms":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/player-panel.vue':function(e,t,r){"use strict";var n=function(){var e=this,t=e.$createElement;return(e._self._c||t)("div",{class:e.$style.container},[e._v("\n  "+e._s(e.name)+"\n")])},s=[],i={render:n,staticRenderFns:s};t.a=i},'./node_modules/vue-loader/lib/template-compiler/index.js?{"id":"data-v-f659458c","hasScoped":false,"transformToRequire":{"img":"src","image":"xlink:href","object":"data","use":"href"},"preserveWhitespace":false,"buble":{"transforms":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/pieces/face.vue':function(e,t,r){"use strict";var n=function(){var e=this,t=e.$createElement;return(e._self._c||t)(e.expression,{tag:"component",class:[e.$style.face,e.colorClass],attrs:{viewBox:e.viewBox}})},s=[],i={render:n,staticRenderFns:s};t.a=i},"./src/board.vue":function(e,t,r){"use strict";function n(e){this.$style=r('./node_modules/extract-text-webpack-plugin/dist/loader.js?{"omit":1,"remove":true}!./node_modules/vue-style-loader/index.js!./node_modules/css-loader/index.js?{"minimize":true,"localIdentName":"[local]-[hash:base64:5]_0","importLoaders":true,"camelCase":true,"modules":true}!./node_modules/vue-loader/lib/style-compiler/index.js?{"vue":true,"id":"data-v-6fde5b2d","scoped":false,"hasInlineConfig":false}!./node_modules/vue-loader/lib/selector.js?type=styles&index=0!./src/board.vue')}var s=r("./node_modules/babel-loader/lib/index.js!./node_modules/vue-loader/lib/selector.js?type=script&index=0!./src/board.vue"),i=r('./node_modules/vue-loader/lib/template-compiler/index.js?{"id":"data-v-6fde5b2d","hasScoped":false,"transformToRequire":{"img":"src","image":"xlink:href","object":"data","use":"href"},"preserveWhitespace":false,"buble":{"transforms":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/board.vue'),o=r("./node_modules/vue-loader/lib/component-normalizer.js"),a=n,l=o(s.a,i.a,!1,a,null,null);t.a=l.exports},"./src/burger-menu.vue":function(e,t,r){"use strict";function n(e){r('./node_modules/extract-text-webpack-plugin/dist/loader.js?{"omit":1,"remove":true}!./node_modules/vue-style-loader/index.js!./node_modules/css-loader/index.js?minimize!./node_modules/vue-loader/lib/style-compiler/index.js?{"vue":true,"id":"data-v-81038f84","scoped":true,"hasInlineConfig":false}!./node_modules/vue-loader/lib/selector.js?type=styles&index=0!./src/burger-menu.vue')}var s=r("./node_modules/babel-loader/lib/index.js!./node_modules/vue-loader/lib/selector.js?type=script&index=0!./src/burger-menu.vue"),i=r('./node_modules/vue-loader/lib/template-compiler/index.js?{"id":"data-v-81038f84","hasScoped":true,"transformToRequire":{"img":"src","image":"xlink:href","object":"data","use":"href"},"preserveWhitespace":false,"buble":{"transforms":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/burger-menu.vue'),o=r("./node_modules/vue-loader/lib/component-normalizer.js"),a=n,l=o(s.a,i.a,!1,a,"data-v-81038f84",null);t.a=l.exports},"./src/cell.vue":function(e,t,r){"use strict";function n(e){this.$style=r('./node_modules/extract-text-webpack-plugin/dist/loader.js?{"omit":1,"remove":true}!./node_modules/vue-style-loader/index.js!./node_modules/css-loader/index.js?{"minimize":true,"localIdentName":"[local]-[hash:base64:5]_0","importLoaders":true,"camelCase":true,"modules":true}!./node_modules/vue-loader/lib/style-compiler/index.js?{"vue":true,"id":"data-v-5d314c2d","scoped":false,"hasInlineConfig":false}!./node_modules/vue-loader/lib/selector.js?type=styles&index=0!./src/cell.vue')}var s=r("./node_modules/babel-loader/lib/index.js!./node_modules/vue-loader/lib/selector.js?type=script&index=0!./src/cell.vue"),i=r('./node_modules/vue-loader/lib/template-compiler/index.js?{"id":"data-v-5d314c2d","hasScoped":false,"transformToRequire":{"img":"src","image":"xlink:href","object":"data","use":"href"},"preserveWhitespace":false,"buble":{"transforms":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/cell.vue'),o=r("./node_modules/vue-loader/lib/component-normalizer.js"),a=n,l=o(s.a,i.a,!1,a,null,null);t.a=l.exports},"./src/game-result.vue":function(e,t,r){"use strict";var n=r("./node_modules/babel-loader/lib/index.js!./node_modules/vue-loader/lib/selector.js?type=script&index=0!./src/game-result.vue"),s=r('./node_modules/vue-loader/lib/template-compiler/index.js?{"id":"data-v-6a9f1840","hasScoped":false,"transformToRequire":{"img":"src","image":"xlink:href","object":"data","use":"href"},"preserveWhitespace":false,"buble":{"transforms":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/game-result.vue'),i=r("./node_modules/vue-loader/lib/component-normalizer.js"),o=i(n.a,s.a,!1,null,null,null);t.a=o.exports},"./src/game.vue":function(e,t,r){"use strict";function n(e){this.$style=r('./node_modules/extract-text-webpack-plugin/dist/loader.js?{"omit":1,"remove":true}!./node_modules/vue-style-loader/index.js!./node_modules/css-loader/index.js?{"minimize":true,"localIdentName":"[local]-[hash:base64:5]_0","importLoaders":true,"camelCase":true,"modules":true}!./node_modules/vue-loader/lib/style-compiler/index.js?{"vue":true,"id":"data-v-40a136e6","scoped":false,"hasInlineConfig":false}!./node_modules/vue-loader/lib/selector.js?type=styles&index=0!./src/game.vue')}var s=r("./node_modules/babel-loader/lib/index.js!./node_modules/vue-loader/lib/selector.js?type=script&index=0!./src/game.vue"),i=r('./node_modules/vue-loader/lib/template-compiler/index.js?{"id":"data-v-40a136e6","hasScoped":false,"transformToRequire":{"img":"src","image":"xlink:href","object":"data","use":"href"},"preserveWhitespace":false,"buble":{"transforms":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/game.vue'),o=r("./node_modules/vue-loader/lib/component-normalizer.js"),a=n,l=o(s.a,i.a,!1,a,null,null);t.a=l.exports},"./src/index.css":function(e,t){},"./src/index.js":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r("./src/index.css"),s=(r.n(n),r("./node_modules/vue/dist/vue.runtime.esm.js")),i=r("./src/main.vue");new s.a({el:"main",render:function(e){return e(i.a)}})},"./src/main.vue":function(e,t,r){"use strict";function n(e){r('./node_modules/extract-text-webpack-plugin/dist/loader.js?{"omit":1,"remove":true}!./node_modules/vue-style-loader/index.js!./node_modules/css-loader/index.js?minimize!./node_modules/vue-loader/lib/style-compiler/index.js?{"vue":true,"id":"data-v-69cf8915","scoped":false,"hasInlineConfig":false}!./node_modules/vue-loader/lib/selector.js?type=styles&index=0!./src/main.vue')}var s=r("./node_modules/babel-loader/lib/index.js!./node_modules/vue-loader/lib/selector.js?type=script&index=0!./src/main.vue"),i=r('./node_modules/vue-loader/lib/template-compiler/index.js?{"id":"data-v-69cf8915","hasScoped":false,"transformToRequire":{"img":"src","image":"xlink:href","object":"data","use":"href"},"preserveWhitespace":false,"buble":{"transforms":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/main.vue'),o=r("./node_modules/vue-loader/lib/component-normalizer.js"),a=n,l=o(s.a,i.a,!1,a,null,null);t.a=l.exports},"./src/model/board.js":function(e,t,r){"use strict";var n=r("./node_modules/babel-runtime/regenerator/index.js"),s=r.n(n),i=r("./node_modules/babel-runtime/core-js/get-iterator.js"),o=r.n(i),a=r("./node_modules/babel-runtime/helpers/classCallCheck.js"),l=r.n(a),u=r("./node_modules/babel-runtime/helpers/createClass.js"),c=r.n(u),d=function(){function e(t){l()(this,e),this.size=t,this.cells=[];for(var r=0;r<this.size;r++){this.cells[r]=[];for(var n=0;n<this.size;n++)this.cells[r][n]={pieces:[]}}}return c()(e,[{key:"cell",value:function(e,t){return this.isInBorders(e,t)?this.cells[t][e]:null}},{key:"isCellEmpty",value:function(e,t){return 0==this.cell(e,t).pieces.length}},{key:"isInBorders",value:function(e,t){return e>=0&&t>=0&&e<this.size&&t<this.size}},{key:"addPiece",value:function(e,t,r){var n=this.cell(e,t);null!=n&&n.pieces.push(r)}},{key:"removePiece",value:function(e,t,r){var n=this.cell(t,r);if(null!=n){var s=n.pieces.indexOf(e);s>=0&&n.pieces.splice(s,1)}}},{key:"removePieces",value:function(e,t){var r=this.cell(e,t);null!=r&&(r.pieces=[])}},{key:"movePieces",value:function(e,t,r,n){var s=this.cell(e,t),i=this.cell(r,n);if(null!=s&&null!=i){var a=!0,l=!1,u=void 0;try{for(var c,d=o()(s.pieces);!(a=(c=d.next()).done);a=!0){var m=c.value;i.pieces.push(m)}}catch(e){l=!0,u=e}finally{try{!a&&d.return&&d.return()}finally{if(l)throw u}}s.pieces=[]}}},{key:"movePiece",value:function(e,t,r,n,s){var i=this.cell(t,r),o=this.cell(n,s);if(null!=i&&null!=o){var a=i.pieces.indexOf(e);a<0||(i.pieces.splice(a,1),o.pieces.push(e))}}},{key:"traverse",value:s.a.mark(function e(t,r,n,i,o){var a,l,u,c;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:a=0;case 1:if(!(a<o)){e.next=12;break}if(l=t+a*n,u=r+a*i,!(c=l<0||u<0||l==this.size||u==this.size)){e.next=7;break}return e.abrupt("break",12);case 7:return e.next=9,{x:l,y:u,pieces:this.cell(l,u).pieces};case 9:a++,e.next=1;break;case 12:case"end":return e.stop()}},e,this)})}]),e}();t.a=d},"./src/model/chess/board.js":function(e,t,r){"use strict";var n=r("./node_modules/babel-runtime/regenerator/index.js"),s=r.n(n),i=r("./node_modules/babel-runtime/core-js/get-iterator.js"),o=r.n(i),a=r("./node_modules/babel-runtime/core-js/object/get-prototype-of.js"),l=r.n(a),u=r("./node_modules/babel-runtime/helpers/classCallCheck.js"),c=r.n(u),d=r("./node_modules/babel-runtime/helpers/createClass.js"),m=r.n(d),p=r("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),f=r.n(p),v=r("./node_modules/babel-runtime/helpers/inherits.js"),h=r.n(v),b=r("./src/model/board.js"),x=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];c()(this,t);for(var r=f()(this,(t.__proto__||l()(t)).call(this,8)),n=0;n<8;n++)for(var s=0;s<8;s++){var i=r.cell(s,n);i.color=(n+s%2)%2==0?"white":"black",i.rank=e?n+1:8-n,i.file=String.fromCharCode(96+(e?8-s:s+1))}return r}return h()(t,e),m()(t,[{key:"findKing",value:function(e){for(var t=0;t<this.size;t++)for(var r=0;r<this.size;r++){var n=this.cell(r,t);if(n.pieces.length>0&&"king"===n.pieces[0].type&&n.pieces[0].color===e)return{x:r,y:t,piece:n.pieces[0]}}return null}},{key:"findPiecesOfColor",value:s.a.mark(function e(t){var r,n,i,a,l,u,c,d,m,p;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:r=0;case 1:if(!(r<this.size)){e.next=38;break}n=0;case 3:if(!(n<this.size)){e.next=35;break}i=this.cell(n,r),a=i.pieces.filter(function(e){return e.color===t}),l=!0,u=!1,c=void 0,e.prev=9,d=o()(a);case 11:if(l=(m=d.next()).done){e.next=18;break}return p=m.value,e.next=15,{x:n,y:r,piece:p};case 15:l=!0,e.next=11;break;case 18:e.next=24;break;case 20:e.prev=20,e.t0=e.catch(9),u=!0,c=e.t0;case 24:e.prev=24,e.prev=25,!l&&d.return&&d.return();case 27:if(e.prev=27,!u){e.next=30;break}throw c;case 30:return e.finish(27);case 31:return e.finish(24);case 32:n++,e.next=3;break;case 35:r++,e.next=1;break;case 38:case"end":return e.stop()}},e,this,[[9,20,24,32],[25,,27,31]])})}]),t}(b.a);t.a=x},"./src/model/chess/game.js":function(e,t,r){"use strict";function n(e){return"white"===e?"black":"white"}var s=r("./node_modules/babel-runtime/helpers/toConsumableArray.js"),i=r.n(s),o=r("./node_modules/babel-runtime/regenerator/index.js"),a=r.n(o),l=r("./node_modules/babel-runtime/core-js/object/assign.js"),u=r.n(l),c=r("./node_modules/babel-runtime/core-js/get-iterator.js"),d=r.n(c),m=r("./node_modules/babel-runtime/core-js/object/get-prototype-of.js"),p=r.n(m),f=r("./node_modules/babel-runtime/helpers/classCallCheck.js"),v=r.n(f),h=r("./node_modules/babel-runtime/helpers/createClass.js"),b=r.n(h),x=r("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),y=r.n(x),g=r("./node_modules/babel-runtime/helpers/get.js"),_=r.n(g),j=r("./node_modules/babel-runtime/helpers/inherits.js"),k=r.n(j),w=r("./src/model/game.js"),C=r("./src/model/chess/board.js"),P=r("./src/model/chess/pieces.js"),M=r("./src/model/chess/piece-move-rules.js"),I=r("./node_modules/deep-equal/index.js"),R=r.n(I),$=r("./node_modules/lodash/compact.js"),E=r.n($),z=function(e){function t(e,r){v()(this,t);var n=y()(this,(t.__proto__||p()(t)).call(this,E()([e,r])));return null!=r&&"white"===r.color&&(n.plrsQueue=[r,e]),n.board=new C.a(null!=e&&"black"===e.color),M.a.apply(),n.nextPieceId=n.constructor.arrangePieces(n.board,e,r),n}return k()(t,e),b()(t,[{key:"handleInterruption",value:function(e,t){switch(t.type){case"resignation":var r=this.opponentPlayer(e);this.endGame({winPlr:r,reason:"resignation"})}}},{key:"validateMove",value:function(e,r){var n=_()(t.prototype.__proto__||p()(t.prototype),"validateMove",this).call(this,e,r);if(!n)return n;var s=this.board.cell(r.from.x,r.from.y),i=this.board.cell(r.to.x,r.to.y);if(null==s||null==i||null==r.piece||r.piece.color!==e.color)return!1;var o=!0,a=!1,l=void 0;try{for(var c,m=d()(this.getValidMoves(e,r.piece,r.from));!(o=(c=m.next()).done);o=!0){var f=c.value;if(R()(f.to,r.to)&&(null==f.castling||this.isCastlingPossible(e,f)))return u()(r,f),!0}}catch(e){a=!0,l=e}finally{try{!o&&m.return&&m.return()}finally{if(a)throw l}}return!1}},{key:"commitMove",value:function(e,r){if(null!=r.capture){var n=!0,s=!1,i=void 0;try{for(var o,a=d()(r.capture.pieces);!(n=(o=a.next()).done);n=!0){var l=o.value;this.board.removePiece(l,r.capture.cell.x,r.capture.cell.y)}}catch(e){s=!0,i=e}finally{try{!n&&a.return&&a.return()}finally{if(s)throw i}}}null!=r.promotion?(this.board.removePiece(r.piece,r.from.x,r.from.y),r.promotion.newPiece=new P.f(this.nextPieceId++,r.piece.color),this.board.cell(r.to.x,r.to.y).pieces.push(r.promotion.newPiece)):(this.board.movePiece(r.piece,r.from.x,r.from.y,r.to.x,r.to.y),null!=r.castling&&this.board.movePiece(r.castling.piece,r.castling.from.x,r.castling.from.y,r.castling.to.x,r.castling.to.y)),r.piece.moveCount++,_()(t.prototype.__proto__||p()(t.prototype),"commitMove",this).call(this,e,r)}},{key:"getValidMoves",value:a.a.mark(function e(t,r,n){var s,i,o,l,c,m;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(null!=r&&r.color==t.color){e.next=2;break}return e.abrupt("return");case 2:s=!0,i=!1,o=void 0,e.prev=5,l=d()(r.getValidMoves(n,this.board,this.log));case 7:if(s=(c=l.next()).done){e.next=15;break}if(m=c.value,this.willKingBeInCheck(t,u()(m,{from:n,piece:r}))){e.next=12;break}return e.next=12,m;case 12:s=!0,e.next=7;break;case 15:e.next=21;break;case 17:e.prev=17,e.t0=e.catch(5),i=!0,o=e.t0;case 21:e.prev=21,e.prev=22,!s&&l.return&&l.return();case 24:if(e.prev=24,!i){e.next=27;break}throw o;case 27:return e.finish(24);case 28:return e.finish(21);case 29:case"end":return e.stop()}},e,this,[[5,17,21,29],[22,,24,28]])})},{key:"isKingInCheck",value:function(e){var t=this.board.findKing(e.color);return this.isCellUnderAttack(e,t)}},{key:"isKingCheckmated",value:function(e){return this.isKingInCheck(e)&&!this.playerCanDoAtLeastOneMove(e)}},{key:"isStalemate",value:function(e){return!this.isKingInCheck(e)&&!this.playerCanDoAtLeastOneMove(e)}},{key:"playerCanDoAtLeastOneMove",value:function(e){var t=this.board.findPiecesOfColor(e.color),r=!0,n=!1,s=void 0;try{for(var i,o=d()(t);!(r=(i=o.next()).done);r=!0){var a=i.value;if(!this.getValidMoves(e,a.piece,a).next().done)return!0}}catch(e){n=!0,s=e}finally{try{!r&&o.return&&o.return()}finally{if(n)throw s}}return!1}},{key:"isCellUnderAttack",value:function(e,t){var r=n(e.color),s=this.board.findPiecesOfColor(r),i=!0,o=!1,a=void 0;try{for(var l,u=d()(s);!(i=(l=u.next()).done);i=!0){var c=l.value;if(c.piece.canAttack(c,t,this.board,this.log))return!0}}catch(e){o=!0,a=e}finally{try{!i&&u.return&&u.return()}finally{if(o)throw a}}return!1}},{key:"willKingBeInCheck",value:function(e,t){this.commitMove(e,t);var r=this.isKingInCheck(e);return this.undoLastMove(),r}},{key:"isCastlingPossible",value:function(e,t){if(this.isKingInCheck(e))return!1;var r=t.from.x<t.to.x?1:-1,n={x:t.from.x+r,y:t.from.y};return!this.isCellUnderAttack(e,n)}},{key:"undoLastMove",value:function(){var e=_()(t.prototype.__proto__||p()(t.prototype),"undoLastMove",this).call(this);if(e){var r=e.move;if(null!=r.capture){var n=this.board.cell(r.capture.cell.x,r.capture.cell.y).pieces;n.push.apply(n,r.capture.pieces)}return null!=r.promotion?(this.board.removePiece(r.promotion.newPiece,r.to.x,r.to.y),this.board.cell(r.from.x,r.from.y).pieces.push(r.piece)):(this.board.movePiece(r.piece,r.to.x,r.to.y,r.from.x,r.from.y),null!=r.castling&&this.board.movePiece(r.castling.piece,r.castling.to.x,r.castling.to.y,r.castling.from.x,r.castling.from.y)),r.piece.moveCount--,e}}},{key:"getGameResult",value:function(e){var t=this.opponentPlayer(e);return this.isKingCheckmated(t)?{winPlr:e,reason:"checkmate"}:this.isStalemate(t)?{draw:!0,reason:"stalemate"}:this.isInsufficientMaterial()?{draw:!0}:null}},{key:"isInsufficientMaterial",value:function(){var e=this,t=function(e){return 1===e.length&&"king"===e[0].piece.type},r=function(e){return 2===e.length&&e.some(function(e){return"king"===e.piece.type})&&e.some(function(e){return"bishop"===e.piece.type})},n=function(e){return 2===e.length&&e.some(function(e){return"king"===e.piece.type})&&e.some(function(e){return"knight"===e.piece.type})},s=function(t){var r=t.find(function(e){return"bishop"===e.piece.type});return e.board.cell(r.x,r.y).color},o=[].concat(i()(this.board.findPiecesOfColor("white"))),a=[].concat(i()(this.board.findPiecesOfColor("black")));return t(o)&&t(a)||t(o)&&r(a)||t(o)&&n(a)||t(a)&&r(o)||t(a)&&n(o)||r(o)&&r(a)&&s(o)===s(a)}},{key:"opponentPlayer",value:function(e){return this.plrs[0]===e?this.plrs[1]:this.plrs[0]}}],[{key:"arrangePieces",value:function(e,t,r){for(var n=null!=t?t.color:null,s=null!=r?r.color:null,i=0,o=0;o<8;o++)s&&e.addPiece(o,1,new P.d(i++,s,1)),n&&e.addPiece(o,6,new P.d(i++,n,-1));for(var a=0;a<8;a+=7){var l=0==a?s:n;l&&(e.addPiece(0,a,new P.g(i++,l)),e.addPiece(1,a,new P.c(i++,l)),e.addPiece(2,a,new P.a(i++,l)),e.addPiece("white"===t.color?3:4,a,new P.f(i++,l)),e.addPiece("white"===t.color?4:3,a,new P.b(i++,l)),e.addPiece(5,a,new P.a(i++,l)),e.addPiece(6,a,new P.c(i++,l)),e.addPiece(7,a,new P.g(i++,l)))}return i}}]),t}(w.a);t.a=z},"./src/model/chess/piece-move-rules.js":function(e,t,r){"use strict";function n(){function e(e,t){return e.to.y===t.size-1||0===e.to.y?y()(e,{promotion:{}}):e}function t(e,t){var r,n;return b.a.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:if(!((r=e.y+this.direction)>=0&&r<t.size)){s.next=4;break}return s.next=4,{x:e.x,y:r};case 4:if(!(n=this.direction>0?1===e.y:6===e.y)){s.next=8;break}return s.next=8,{x:e.x,y:e.y+2*this.direction};case 8:case"end":return s.stop()}},o,this)}function r(r,n){var s,i,o,l,u,c;return b.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:s=!0,i=!1,o=void 0,a.prev=3,l=v()(t.call(this,r,n));case 5:if(s=(u=l.next()).done){a.next=16;break}if(c=u.value,!n.isInBorders(c.x,c.y)||!n.isCellEmpty(c.x,c.y)){a.next=12;break}return a.next=10,e({to:c},n);case 10:a.next=13;break;case 12:return a.abrupt("break",16);case 13:s=!0,a.next=5;break;case 16:a.next=22;break;case 18:a.prev=18,a.t0=a.catch(3),i=!0,o=a.t0;case 22:a.prev=22,a.prev=23,!s&&l.return&&l.return();case 25:if(a.prev=25,!i){a.next=28;break}throw o;case 28:return a.finish(25);case 29:return a.finish(22);case 30:case"end":return a.stop()}},a,this,[[3,18,22,30],[23,,25,29]])}function n(e,t){return b.a.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:if(!(e.x-1>=0)){r.next=3;break}return r.next=3,{x:e.x-1,y:e.y+this.direction};case 3:if(!(e.x+1<t.size)){r.next=6;break}return r.next=6,{x:e.x+1,y:e.y+this.direction};case 6:case"end":return r.stop()}},l,this)}function s(t,r){var s,i,o,a,l,c,m,f;return b.a.wrap(function(u){for(;;)switch(u.prev=u.next){case 0:s=d(this.color),i=!0,o=!1,a=void 0,u.prev=4,l=v()(n.call(this,t,r));case 6:if(i=(c=l.next()).done){u.next=15;break}if(m=c.value,f=r.cell(m.x,m.y),!(f.pieces.length>0&&f.pieces[0].color===s)){u.next=12;break}return u.next=12,e({to:m,capture:{cell:m,pieces:[].concat(p()(f.pieces))}},r);case 12:i=!0,u.next=6;break;case 15:u.next=21;break;case 17:u.prev=17,u.t0=u.catch(4),o=!0,a=u.t0;case 21:u.prev=21,u.prev=22,!i&&l.return&&l.return();case 24:if(u.prev=24,!o){u.next=27;break}throw a;case 27:return u.finish(24);case 28:return u.finish(21);case 29:case"end":return u.stop()}},u,this,[[4,17,21,29],[22,,24,28]])}function i(e,t,r){var n,s,i;return b.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(null!==(n=r.length>0?r[r.length-1].move:null)){t.next=3;break}return t.abrupt("return");case 3:if(s="pawn"===n.piece.type&&2===Math.abs(n.from.y-n.to.y)){t.next=6;break}return t.abrupt("return");case 6:if(i=1===Math.abs(e.x-n.to.x)&&e.y===n.to.y){t.next=9;break}return t.abrupt("return");case 9:return t.next=11,{to:{x:n.to.x,y:e.y+this.direction},capture:{cell:n.to,pieces:[n.piece]}};case 11:case"end":return t.stop()}},c,this)}var o=b.a.mark(t),a=b.a.mark(r),l=b.a.mark(n),u=b.a.mark(s),c=b.a.mark(i);return{getValidMoves:b.a.mark(function e(t,n,o){return b.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.delegateYield(r.call(this,t,n),"t0",1);case 1:return e.delegateYield(s.call(this,t,n),"t1",2);case 2:return e.delegateYield(i.call(this,t,n,o),"t2",3);case 3:case"end":return e.stop()}},e,this)}),canAttack:function(e,t,r){var s=!0,i=!1,o=void 0;try{for(var a,l=v()(n.call(this,e,r));!(s=(a=l.next()).done);s=!0){var u=a.value;if(u.x===t.x&&u.y===t.y)return!0}}catch(e){i=!0,o=e}finally{try{!s&&l.return&&l.return()}finally{if(i)throw o}}return!1}}}function s(){return{getValidMoves:b.a.mark(function e(t,r){return b.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.delegateYield(u(this.color,r,r.traverse.bind(r,t.x,t.y+1,0,1,8)),"t0",1);case 1:return e.delegateYield(u(this.color,r,r.traverse.bind(r,t.x,t.y-1,0,-1,8)),"t1",2);case 2:return e.delegateYield(u(this.color,r,r.traverse.bind(r,t.x+1,t.y,1,0,8)),"t2",3);case 3:return e.delegateYield(u(this.color,r,r.traverse.bind(r,t.x-1,t.y,-1,0,8)),"t3",4);case 4:case"end":return e.stop()}},e,this)})}}function i(){return{getValidMoves:b.a.mark(function e(t,r){return b.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.delegateYield(u(this.color,r,r.traverse.bind(r,t.x+1,t.y+1,1,1,8)),"t0",1);case 1:return e.delegateYield(u(this.color,r,r.traverse.bind(r,t.x+1,t.y-1,1,-1,8)),"t1",2);case 2:return e.delegateYield(u(this.color,r,r.traverse.bind(r,t.x-1,t.y+1,-1,1,8)),"t2",3);case 3:return e.delegateYield(u(this.color,r,r.traverse.bind(r,t.x-1,t.y-1,-1,-1,8)),"t3",4);case 4:case"end":return e.stop()}},e,this)})}}function o(){return{getValidMoves:b.a.mark(function e(t,r){return b.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.delegateYield(g.g.prototype.getValidMoves.call(this,t,r),"t0",1);case 1:return e.delegateYield(g.a.prototype.getValidMoves.call(this,t,r),"t1",2);case 2:case"end":return e.stop()}},e,this)})}}function a(){return{getValidMoves:b.a.mark(function e(t,r){return b.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.delegateYield(u(this.color,r,b.a.mark(function e(){return b.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,{x:t.x+1,y:t.y+2};case 2:return e.next=4,{x:t.x+2,y:t.y+1};case 4:return e.next=6,{x:t.x-1,y:t.y+2};case 6:return e.next=8,{x:t.x-2,y:t.y+1};case 8:return e.next=10,{x:t.x+1,y:t.y-2};case 10:return e.next=12,{x:t.x+2,y:t.y-1};case 12:return e.next=14,{x:t.x-1,y:t.y-2};case 14:return e.next=16,{x:t.x-2,y:t.y-1};case 16:case"end":return e.stop()}},e,this)}),!1),"t0",1);case 1:case"end":return e.stop()}},e,this)})}}function l(){function e(e,t,r){if(t.cell(e.x,e.y).pieces[0].moveCount>0)return null;var n=t.cell(r,e.y).pieces[0];if(null==n||n.moveCount>0)return null;for(var s=e.x>r?-1:1,i=e.x+s;i!=r;i+=s)if(!t.isCellEmpty(i,e.y))return null;return{to:{x:e.x+2*s,y:e.y},castling:{from:{x:r,y:e.y},to:{x:e.x+s,y:e.y},piece:n}}}function t(t,n){var s,i;return b.a.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:if(null===(s=e(t,n,7))){r.next=4;break}return r.next=4,s;case 4:if(null===(i=e(t,n,0))){r.next=8;break}return r.next=8,i;case 8:case"end":return r.stop()}},r,this)}var r=b.a.mark(t);return{getValidMoves:b.a.mark(function e(r,n){return b.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.delegateYield(t(r,n),"t0",1);case 1:return e.delegateYield(u(this.color,n,b.a.mark(function e(){return b.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,{x:r.x,y:r.y+1};case 2:return e.next=4,{x:r.x+1,y:r.y+1};case 4:return e.next=6,{x:r.x+1,y:r.y};case 6:return e.next=8,{x:r.x+1,y:r.y-1};case 8:return e.next=10,{x:r.x,y:r.y-1};case 10:return e.next=12,{x:r.x-1,y:r.y-1};case 12:return e.next=14,{x:r.x-1,y:r.y};case 14:return e.next=16,{x:r.x-1,y:r.y+1};case 16:case"end":return e.stop()}},e,this)}),!1),"t1",2);case 2:case"end":return e.stop()}},e,this)})}}function u(e,t,r){var n,s,i,o,a,l,u,c,m,f=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];return b.a.wrap(function(h){for(;;)switch(h.prev=h.next){case 0:n=d(e),s=!0,i=!1,o=void 0,h.prev=4,a=v()(r());case 6:if(s=(l=a.next()).done){h.next=25;break}if(u=l.value,t.isInBorders(u.x,u.y)){h.next=10;break}return h.abrupt("continue",22);case 10:if(c=t.cell(u.x,u.y),m={x:u.x,y:u.y},0!==c.pieces.length){h.next=17;break}return h.next=15,{to:m};case 15:h.next=22;break;case 17:if(c.pieces[0].color!==n){h.next=20;break}return h.next=20,{to:m,capture:{cell:m,pieces:[].concat(p()(c.pieces))}};case 20:if(!f){h.next=22;break}return h.abrupt("return");case 22:s=!0,h.next=6;break;case 25:h.next=31;break;case 27:h.prev=27,h.t0=h.catch(4),i=!0,o=h.t0;case 31:h.prev=31,h.prev=32,!s&&a.return&&a.return();case 34:if(h.prev=34,!i){h.next=37;break}throw o;case 37:return h.finish(34);case 38:return h.finish(31);case 39:case"end":return h.stop()}},_,this,[[4,27,31,39],[32,,34,38]])}function c(e,t,r,n){var s=!0,i=!1,o=void 0;try{for(var a,l=v()(this.getValidMoves(e,r,n));!(s=(a=l.next()).done);s=!0){var u=a.value;if(u.to.x===t.x&&u.to.y===t.y)return!0}}catch(e){i=!0,o=e}finally{try{!s&&l.return&&l.return()}finally{if(i)throw o}}return!1}function d(e){return"black"===e?"white":"black"}var m=r("./node_modules/babel-runtime/helpers/toConsumableArray.js"),p=r.n(m),f=r("./node_modules/babel-runtime/core-js/get-iterator.js"),v=r.n(f),h=r("./node_modules/babel-runtime/regenerator/index.js"),b=r.n(h),x=r("./node_modules/babel-runtime/core-js/object/assign.js"),y=r.n(x),g=r("./src/model/chess/pieces.js"),_=b.a.mark(u);t.a={apply:function(){y()(g.e.prototype,{canAttack:c}),y()(g.d.prototype,n()),y()(g.g.prototype,s()),y()(g.a.prototype,i()),y()(g.f.prototype,o()),y()(g.c.prototype,a()),y()(g.b.prototype,l())}}},"./src/model/chess/pieces.js":function(e,t,r){"use strict";r.d(t,"e",function(){return d}),r.d(t,"d",function(){return m}),r.d(t,"b",function(){return p}),r.d(t,"f",function(){return f}),r.d(t,"c",function(){return v}),r.d(t,"a",function(){return h}),r.d(t,"g",function(){return b});var n=r("./node_modules/babel-runtime/core-js/object/get-prototype-of.js"),s=r.n(n),i=r("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),o=r.n(i),a=r("./node_modules/babel-runtime/helpers/inherits.js"),l=r.n(a),u=r("./node_modules/babel-runtime/helpers/classCallCheck.js"),c=r.n(u),d=function e(t,r,n){c()(this,e),this.id=t,this.type=r,this.color=n,this.moveCount=0},m=function(e){function t(e,r,n){c()(this,t);var i=o()(this,(t.__proto__||s()(t)).call(this,e,"pawn",r));return i.direction=n,i}return l()(t,e),t}(d),p=function(e){function t(e,r){return c()(this,t),o()(this,(t.__proto__||s()(t)).call(this,e,"king",r))}return l()(t,e),t}(d),f=function(e){function t(e,r){return c()(this,t),o()(this,(t.__proto__||s()(t)).call(this,e,"queen",r))}return l()(t,e),t}(d),v=function(e){function t(e,r){return c()(this,t),o()(this,(t.__proto__||s()(t)).call(this,e,"knight",r))}return l()(t,e),t}(d),h=function(e){function t(e,r){return c()(this,t),o()(this,(t.__proto__||s()(t)).call(this,e,"bishop",r))}return l()(t,e),t}(d),b=function(e){function t(e,r){return c()(this,t),o()(this,(t.__proto__||s()(t)).call(this,e,"rook",r))}return l()(t,e),t}(d)},"./src/model/chess/player.js":function(e,t,r){"use strict";var n=r("./node_modules/babel-runtime/core-js/object/get-prototype-of.js"),s=r.n(n),i=r("./node_modules/babel-runtime/helpers/classCallCheck.js"),o=r.n(i),a=r("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),l=r.n(a),u=r("./node_modules/babel-runtime/helpers/inherits.js"),c=r.n(u),d=r("./src/model/player.js"),m=function(e){function t(e,r,n){o()(this,t);var i=l()(this,(t.__proto__||s()(t)).call(this,e,n));return i.color=r,i}return c()(t,e),t}(d.a);t.a=m},"./src/model/game.js":function(e,t,r){"use strict";var n=r("./node_modules/babel-runtime/regenerator/index.js"),s=r.n(n),i=r("./node_modules/babel-runtime/core-js/promise.js"),o=r.n(i),a=r("./node_modules/babel-runtime/helpers/asyncToGenerator.js"),l=r.n(a),u=r("./node_modules/babel-runtime/helpers/toConsumableArray.js"),c=r.n(u),d=r("./node_modules/babel-runtime/helpers/classCallCheck.js"),m=r.n(d),p=r("./node_modules/babel-runtime/helpers/createClass.js"),f=r.n(p),v=r("./src/utils/event.js"),h=function(){function e(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;m()(this,e),this.plrs=t,this.options=r||{},this.plrsQueue=[].concat(c()(t)),this.stopPending=!1,this.log=[],this.gameResult=null,this.playerOnTurnEvent=new v.a,this.lastMoveUndoneEvent=new v.a,this.moveDoneEvent=new v.a,this.moveAcceptedEvent=new v.a,this.moveRejectedEvent=new v.a,this.gameEndedEvent=new v.a,this.interruptedEvent=new v.a}return f()(e,[{key:"listenForInterruption",value:function(){function e(){return t.apply(this,arguments)}var t=l()(s.a.mark(function e(){var t,r,n,i;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.isEnded){e.next=11;break}return t=this.plrsQueue.map(function(e){return e.interrupt().then(function(t){return{plr:e,interruption:t}})}),e.next=4,o.a.race(t);case 4:r=e.sent,n=r.plr,i=r.interruption,this.handleInterruption(n,i),this.interruptedEvent.emit(n,i),e.next=0;break;case 11:case"end":return e.stop()}},e,this)}));return e}()},{key:"handleInterruption",value:function(){}},{key:"run",value:function(){function e(){return t.apply(this,arguments)}var t=l()(s.a.mark(function e(){var t,r,n,i,o;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:this.listenForInterruption();case 1:if(!(this.plrsQueue.length>0)){e.next=20;break}return t=this.plrsQueue.shift(),this.playerOnTurnEvent.emit(t),e.next=6,t.move();case 6:if(r=e.sent,!this.stopPending){e.next=9;break}return e.abrupt("return");case 9:if(!r.undoLastOpponentMove){e.next=13;break}return n=this.undoLastMove(),n?(this.plrsQueue.push(t),this.lastMoveUndoneEvent.emit(n.plr,n.move)):this.plrsQueue.unshift(t),e.abrupt("continue",1);case 13:this.moveDoneEvent.emit(r),i=this.validateMove(t,r),i?(this.commitMove(t,r),this.plrsQueue.push(t),this.moveAcceptedEvent.emit(t,r)):(this.plrsQueue.unshift(t),this.moveRejectedEvent.emit(t,r)),o=this.getGameResult(t,r),null!=o&&this.endGame(o),e.next=1;break;case 20:case"end":return e.stop()}},e,this)}));return e}()},{key:"validateMove",value:function(){return!this.isEnded}},{key:"commitMove",value:function(e,t){this.log.push({plr:e,move:t})}},{key:"undoLastMove",value:function(){return this.log.pop()}},{key:"getGameResult",value:function(){return null}},{key:"stop",value:function(){this.stopPending=!0}},{key:"endGame",value:function(e){null==this.gameResult&&(this.gameResult=e,this.plrsQueue=[],this.gameEndedEvent.emit(this.gameResult))}},{key:"isEnded",get:function(){return null!=this.gameResult}}]),e}();t.a=h},"./src/model/player.js":function(e,t,r){"use strict";var n=r("./node_modules/babel-runtime/regenerator/index.js"),s=r.n(n),i=r("./node_modules/babel-runtime/helpers/asyncToGenerator.js"),o=r.n(i),a=r("./node_modules/babel-runtime/helpers/classCallCheck.js"),l=r.n(a),u=r("./node_modules/babel-runtime/helpers/createClass.js"),c=r.n(u),d=function(){function e(t,r){l()(this,e),this.id=t,this.name=r}return c()(e,[{key:"move",value:function(){function e(){return t.apply(this,arguments)}var t=o()(s.a.mark(function e(){return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e,this)}));return e}()},{key:"interrupt",value:function(){function e(){return t.apply(this,arguments)}var t=o()(s.a.mark(function e(){return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e,this)}));return e}()}]),e}();t.a=d},"./src/offline-game-factory.js":function(e,t,r){"use strict";var n=r("./node_modules/babel-runtime/helpers/classCallCheck.js"),s=r.n(n),i=r("./node_modules/babel-runtime/helpers/createClass.js"),o=r.n(i),a=r("./src/ui-player.js"),l=r("./src/model/chess/game.js"),u=function(){function e(t){s()(this,e),this.uiVm=t,this.lastFirstPlrColor="black"}return o()(e,[{key:"create",value:function(){var e=this.getPlayerColors(),t=this.createPlayer(1,e[0]),r=this.createPlayer(2,e[1]);return new l.a(t,r)}},{key:"createPlayer",value:function(e,t){return new a.a(this.uiVm,e,t,t)}},{key:"getPlayerColors",value:function(){this.lastFirstPlrColor="white"===this.lastFirstPlrColor?"black":"white";var e="white"===this.lastFirstPlrColor?"black":"white";return[this.lastFirstPlrColor,e]}}]),e}();t.a=u},"./src/online-game-factory.js":function(e,t,r){"use strict";function n(e){return"white"===e?"black":"white"}var s=r("./node_modules/babel-runtime/core-js/json/stringify.js"),i=r.n(s),o=r("./node_modules/babel-runtime/core-js/get-iterator.js"),a=r.n(o),l=r("./node_modules/babel-runtime/core-js/promise.js"),u=r.n(l),c=r("./node_modules/babel-runtime/regenerator/index.js"),d=r.n(c),m=r("./node_modules/babel-runtime/helpers/asyncToGenerator.js"),p=r.n(m),f=r("./node_modules/babel-runtime/helpers/classCallCheck.js"),v=r.n(f),h=r("./node_modules/babel-runtime/helpers/createClass.js"),b=r.n(h),x=r("./node_modules/firebase/index.js"),y=r.n(x),g=r("./src/utils/date-utils.js"),_=r("./src/ui-player.js"),j=r("./src/remote-player.js"),k=r("./src/model/chess/game.js"),w=function(){function e(t,r){v()(this,e),this.db=t,this.uiVm=r}return b()(e,[{key:"create",value:function(){function e(e){return t.apply(this,arguments)}var t=p()(d.a.mark(function e(t){var r=this;return d.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.join(t).catch(function(){return r.initiate(t)}));case 1:case"end":return e.stop()}},e,this)}));return e}()},{key:"initiate",value:function(){function e(e){return t.apply(this,arguments)}var t=p()(d.a.mark(function e(t){var r,n,s,i;return d.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=this.createUiPlayer(t),e.next=3,this.addGameToDb(r);case 3:return n=e.sent,e.next=6,this.waitOpponentJoining(n);case 6:return s=e.sent,i=this.createGame(n,r,s),s.board=i.board,e.abrupt("return",i);case 10:case"end":return e.stop()}},e,this)}));return e}()},{key:"join",value:function(){function e(e){return t.apply(this,arguments)}var t=p()(d.a.mark(function e(t){var r=this;return d.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.db.runTransaction(function(){var e=p()(d.a.mark(function e(s){var i,o,l,c,m,p,f,v,h,b,x,y,g;return d.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.findGamesToJoin(t);case 2:i=e.sent,o=null,l=!0,c=!1,m=void 0,e.prev=7,p=a()(i);case 9:if(l=(f=p.next()).done){e.next=20;break}return v=f.value,e.next=13,s.get(v.ref);case 13:if(h=e.sent,null!=h.data().plr2Id){e.next=17;break}return o=h,e.abrupt("break",20);case 17:l=!0,e.next=9;break;case 20:e.next=26;break;case 22:e.prev=22,e.t0=e.catch(7),c=!0,m=e.t0;case 26:e.prev=26,e.prev=27,!l&&p.return&&p.return();case 29:if(e.prev=29,!c){e.next=32;break}throw m;case 32:return e.finish(29);case 33:return e.finish(26);case 34:if(null!=o){e.next=36;break}return e.abrupt("return",u.a.reject(null));case 36:return b=r.createUiPlayer(t),x=o.data(),y=new j.a(o.ref,x.plr1Id,x.plr1Color,x.plr1Name),b.color=n(y.color),s.update(o.ref,{plr2Id:b.id,plr2Name:b.name,plr2Color:b.color}),g=r.createGame(o.ref,b,y),y.board=g.board,e.abrupt("return",g);case 44:case"end":return e.stop()}},e,r,[[7,22,26,34],[27,,29,33]])}));return function(t){return e.apply(this,arguments)}}()));case 1:case"end":return e.stop()}},e,this)}));return e}()},{key:"findGamesToJoin",value:function(){function e(e){return t.apply(this,arguments)}var t=p()(d.a.mark(function e(t){var r,n,s;return d.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.db.collection("games").where("plr2Id","==",null).orderBy("timestamp","desc").get();case 2:return r=e.sent,n=3,s=[],r.forEach(function(e){Object(g.a)(e.data().timestamp,n)||e.data().plr1Id==t.id||s.push(e)}),e.abrupt("return",s);case 7:case"end":return e.stop()}},e,this)}));return e}()},{key:"waitOpponentJoining",value:function(){function e(e){return t.apply(this,arguments)}var t=p()(d.a.mark(function e(t){return d.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new u.a(function(e,r){var n=t.onSnapshot(function(r){var s=r.data();if(null!=s.plr2Id){n();var i=new j.a(t,s.plr2Id,s.plr2Color,s.plr2Name);e(i)}},function(e){return r(e)})}));case 1:case"end":return e.stop()}},e,this)}));return e}()},{key:"createGame",value:function(e,t,r){var n=this,s=new k.a(t,r);return s.moveAcceptedEvent.on(function(r,s){r===t&&n.addMoveToDb(e,r,s)}),s.interruptedEvent.on(function(r,s){r===t&&n.addInterruptionToDb(e,r,s)}),s}},{key:"addGameToDb",value:function(){function e(e){return t.apply(this,arguments)}var t=p()(d.a.mark(function e(t){var r;return d.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r={plr1Id:t.id,plr1Name:t.name,plr1Color:t.color,plr2Id:null,timestamp:y.a.firestore.FieldValue.serverTimestamp()},e.abrupt("return",this.db.collection("games").add(r));case 2:case"end":return e.stop()}},e,this)}));return e}()},{key:"addMoveToDb",value:function(){function e(e,r,n){return t.apply(this,arguments)}var t=p()(d.a.mark(function e(t,r,n){var s;return d.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return s={plrId:r.id,move:i()({from:n.from,to:n.to}),timestamp:y.a.firestore.FieldValue.serverTimestamp()},e.abrupt("return",t.collection("moves").add(s));case 2:case"end":return e.stop()}},e,this)}));return e}()},{key:"addInterruptionToDb",value:function(){function e(e,r,n){return t.apply(this,arguments)}var t=p()(d.a.mark(function e(t,r,n){var s;return d.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return s={plrId:r.id,interruption:i()(n),timestamp:y.a.firestore.FieldValue.serverTimestamp()},e.abrupt("return",t.collection("interruptions").add(s));case 2:case"end":return e.stop()}},e,this)}));return e}()},{key:"createUiPlayer",value:function(e){return new _.a(this.uiVm,e.id,Math.random()<.5?"white":"black",e.name)}}]),e}();t.a=w},"./src/pieces/bishop.svg":function(module,exports){module.exports={render:function(){with(this)return _c("svg",{attrs:{xmlns:"http://www.w3.org/2000/svg",width:"100",height:"100"}},[_c("path",{attrs:{d:"M89.492 99.493V79.657H79.62c1.342-.071 6.668-12.033.822-28.72-3.485-9.952-25.307-30.442-24.42-32.546 3.373-2.585 4.742-7.049 3.403-11.1C58.086 3.239 54.34.505 50.12.5c-4.22-.006-8.205 2.464-9.553 6.512-1.347 4.048.01 8.516 3.605 11.389 1.116 2.384-21.127 22.583-24.612 32.535-5.846 16.687-.52 28.649.822 28.72h-9.873v19.836z"}})])}}},"./src/pieces/captured-transition.js":function(e,t,r){"use strict";var n=r("./node_modules/vue/dist/vue.runtime.esm.js"),s=r("./node_modules/web-animations-js/web-animations.min.js");r.n(s);t.a=n.a.component("captured-transition",{functional:!0,render:function(e,t){return e("transition-group",{props:{css:!1,tag:"div"},on:{leave:function(e,t){if(!e.captured)return void t();var r=100*Math.random()-50|0,n=100*Math.random()-50|0,s=360*Math.random()-180|0,i=[{transform:"scale(1) rotate(0)",opacity:1},{transform:"scale(4)  rotate("+s+"deg) translate("+r+"px, "+n+"px)",opacity:0}],o={duration:350,easing:"ease-in-out"};e.animate(i,o).addEventListener("finish",t),setTimeout(function(){e.style.display="none"},350)}}},t.children)}})},"./src/pieces/face-expressions/fear.svg":function(module,exports){module.exports={render:function(){with(this)return _c("svg",{attrs:{xmlns:"http://www.w3.org/2000/svg",width:"100",height:"100"}},[_c("path",{attrs:{d:"M56 85a6 8 0 0 1-6 8 6 8 0 0 1-6-8 6 8 0 0 1 6-8 6 8 0 0 1 6 8zM38.951 75A3.951 4.026 0 0 1 35 79.026 3.951 4.026 0 0 1 31.049 75 3.951 4.026 0 0 1 35 70.974 3.951 4.026 0 0 1 38.951 75zm30.037-.15a4.101 4.101 0 0 1-4.1 4.101 4.101 4.101 0 0 1-4.102-4.1 4.101 4.101 0 0 1 4.101-4.102 4.101 4.101 0 0 1 4.101 4.101z"}})])}}},"./src/pieces/face-expressions/joy.svg":function(module,exports){module.exports={render:function(){with(this)return _c("svg",{attrs:{xmlns:"http://www.w3.org/2000/svg",height:"100",width:"100"}},[_c("path",{attrs:{d:"M65.14 70a5.047 5 0 0 0-5.046 5h2.523a2.523 2.5 0 0 1 2.523-2.5 2.523 2.5 0 0 1 2.524 2.5h2.523a5.047 5 0 0 0-5.047-5zm-30.28 0a5.047 5 0 0 0-5.047 5h2.523a2.523 2.5 0 0 1 2.524-2.5 2.523 2.5 0 0 1 2.523 2.5h2.523a5.047 5 0 0 0-5.046-5zm25.234 10a10.094 10 0 0 1-5.047 8.66 10.094 10 0 0 1-10.094 0A10.094 10 0 0 1 39.906 80H50z"}})])}}},"./src/pieces/face-expressions/laugh.svg":function(module,exports){module.exports={render:function(){with(this)return _c("svg",{attrs:{xmlns:"http://www.w3.org/2000/svg",width:"100",height:"100"}},[_c("path",{attrs:{d:"M68.988 74.85a4.101 4.101 0 0 1-4.1 4.101 4.101 4.101 0 0 1-4.102-4.1 4.101 4.101 0 0 1 4.101-4.102 4.101 4.101 0 0 1 4.101 4.101zM38.951 75A3.951 4.026 0 0 1 35 79.026 3.951 4.026 0 0 1 31.049 75 3.951 4.026 0 0 1 35 70.974 3.951 4.026 0 0 1 38.951 75zm21.143 5a10.094 10 0 0 1-5.047 8.66 10.094 10 0 0 1-10.094 0A10.094 10 0 0 1 39.906 80H50z"}})])}}},"./src/pieces/face.vue":function(e,t,r){"use strict";function n(e){this.$style=r('./node_modules/extract-text-webpack-plugin/dist/loader.js?{"omit":1,"remove":true}!./node_modules/vue-style-loader/index.js!./node_modules/css-loader/index.js?{"minimize":true,"localIdentName":"[local]-[hash:base64:5]_0","importLoaders":true,"camelCase":true,"modules":true}!./node_modules/vue-loader/lib/style-compiler/index.js?{"vue":true,"id":"data-v-f659458c","scoped":false,"hasInlineConfig":false}!./node_modules/vue-loader/lib/selector.js?type=styles&index=0!./src/pieces/face.vue')}var s=r("./node_modules/babel-loader/lib/index.js!./node_modules/vue-loader/lib/selector.js?type=script&index=0!./src/pieces/face.vue"),i=r('./node_modules/vue-loader/lib/template-compiler/index.js?{"id":"data-v-f659458c","hasScoped":false,"transformToRequire":{"img":"src","image":"xlink:href","object":"data","use":"href"},"preserveWhitespace":false,"buble":{"transforms":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/pieces/face.vue'),o=r("./node_modules/vue-loader/lib/component-normalizer.js"),a=n,l=o(s.a,i.a,!1,a,null,null);t.a=l.exports},"./src/pieces/king.svg":function(module,exports){module.exports={render:function(){with(this)return _c("svg",{attrs:{xmlns:"http://www.w3.org/2000/svg",width:"100",height:"100"}},[_c("path",{attrs:{d:"M89.894 99.463V79.665h-4.983S100.99 66.6 99.406 44.78C97.012 11.798 54.87 30.04 55.012 30.168V20.27h9.967v-9.9h-9.967V.47h-9.966v9.9H35.08v9.899h9.966v9.9c.143-.13-42-18.37-44.393 14.611C-.931 66.6 15.148 79.665 15.148 79.665h-4.983v19.798z"}})])}}},"./src/pieces/knight.svg":function(module,exports){module.exports={render:function(){with(this)return _c("svg",{attrs:{xmlns:"http://www.w3.org/2000/svg",height:"100",width:"100"}},[_c("path",{attrs:{d:"M10.255 80c7.608-15.482 11.028-14.836 17.674-18.964C40.914 52.972 46.755 43.09 46.787 41.61c.032-1.478-3.016-1.116-2.23-1.61 0 0-10.335 13-24.315 10-6.86 7.047-5.384 7.089-15.24 4.219-7.214-2.101-4.5-9.831-.26-15.05C13.068 28.924 17.337 24.317 20.242 20c2.265-3.217 4.37-6.283 8.364-8.283C32.601 9.717 40.214 0 40.214 0l4.993 5L50.2 0l4.993 5c7.073 5.182 22.068 13.368 30.22 46.042 2.78 11.148.874 20.544 4.732 28.958v20h-79.89z"}})])}}},"./src/pieces/pawn.svg":function(module,exports){module.exports={render:function(){with(this)return _c("svg",{attrs:{xmlns:"http://www.w3.org/2000/svg",height:"100",width:"100"}},[_c("path",{attrs:{d:"M89.545 100V79.91C75.019 69.58 67.333 59.772 59.834 37.572c7.798-4.487 11.651-13.742 9.39-22.553C66.96 6.21 59.15.045 50.187 0c-8.962-.044-16.832 6.04-19.18 14.829-2.346 8.788 1.417 18.08 9.172 22.645C33.824 52.952 26.463 73.29 10.455 79.91V100z"}})])}}},"./src/pieces/piece-svg.vue":function(e,t,r){"use strict";function n(e){this.$style=r('./node_modules/extract-text-webpack-plugin/dist/loader.js?{"omit":1,"remove":true}!./node_modules/vue-style-loader/index.js!./node_modules/css-loader/index.js?{"minimize":true,"localIdentName":"[local]-[hash:base64:5]_0","importLoaders":true,"camelCase":true,"modules":true}!./node_modules/vue-loader/lib/style-compiler/index.js?{"vue":true,"id":"data-v-27c3e224","scoped":false,"hasInlineConfig":false}!./node_modules/vue-loader/lib/selector.js?type=styles&index=0!./src/pieces/piece-svg.vue')}var s=r("./node_modules/babel-loader/lib/index.js!./node_modules/vue-loader/lib/selector.js?type=script&index=0!./src/pieces/piece-svg.vue"),i=r('./node_modules/vue-loader/lib/template-compiler/index.js?{"id":"data-v-27c3e224","hasScoped":false,"transformToRequire":{"img":"src","image":"xlink:href","object":"data","use":"href"},"preserveWhitespace":false,"buble":{"transforms":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/pieces/piece-svg.vue'),o=r("./node_modules/vue-loader/lib/component-normalizer.js"),a=n,l=o(s.a,i.a,!1,a,null,null);t.a=l.exports},"./src/pieces/queen.svg":function(module,exports){module.exports={render:function(){with(this)return _c("svg",{attrs:{xmlns:"http://www.w3.org/2000/svg",width:"100",height:"100"}},[_c("path",{attrs:{d:"M89.992 99.467v-19.77h-5.035l4.076-31.022c6.854.928 12.669-6.815 9.686-12.992-2.486-6.633-12.654-7.75-16.581-1.846-2.418 3.2-2.389 7.892.067 11.063l-7.034 4.231-6.737-30.362c6.686-1.98 8.612-11.536 3.172-15.865C66.395-2.11 56.55 1.363 55.786 8.51c-.674 3.986 1.602 8.187 5.322 9.874L49.715 40.158l-10.379-21.9c6.256-2.976 6.664-12.639.672-16.109-5.84-4.154-14.974.548-14.802 7.656-.144 4.007 2.615 7.86 6.483 9.092L24.54 50.043l-6.464-4.767c2.066-2.997 2.113-7.147.114-10.188-3.508-6.037-13.53-5.668-16.554.628-3.72 6.19 2.128 14.73 9.33 13.731l3.505 30.25H9.438v19.77z"}})])}}},"./src/pieces/rook.svg":function(module,exports){module.exports={render:function(){with(this)return _c("svg",{attrs:{xmlns:"http://www.w3.org/2000/svg",width:"100",height:"100"}},[_c("path",{attrs:{d:"M25.325.487H10.52v29.708h9.87c-1.308 16.745-1.374 34.487-9.87 49.513v19.806m0 0h78.96V79.708C82.574 64.385 81.525 46.534 80 30h9.5L89.48.487H74.675v9.902H59.87V.487H40.13v9.902H25.325V.487"}})])}}},"./src/pieces/sounds/captured.mp3":function(e,t,r){e.exports=r.p+"captured.mp3"},"./src/pieces/sounds/check.mp3":function(e,t,r){e.exports=r.p+"check.mp3"},"./src/pieces/sounds/move.mp3":function(e,t,r){e.exports=r.p+"move.mp3"},"./src/pieces/sounds/rejected.mp3":function(e,t,r){e.exports=r.p+"rejected.mp3"},"./src/player-panel.vue":function(e,t,r){"use strict";function n(e){this.$style=r('./node_modules/extract-text-webpack-plugin/dist/loader.js?{"omit":1,"remove":true}!./node_modules/vue-style-loader/index.js!./node_modules/css-loader/index.js?{"minimize":true,"localIdentName":"[local]-[hash:base64:5]_0","importLoaders":true,"camelCase":true,"modules":true}!./node_modules/vue-loader/lib/style-compiler/index.js?{"vue":true,"id":"data-v-d9e86bf0","scoped":false,"hasInlineConfig":false}!./node_modules/vue-loader/lib/selector.js?type=styles&index=0!./src/player-panel.vue')}var s=r("./node_modules/babel-loader/lib/index.js!./node_modules/vue-loader/lib/selector.js?type=script&index=0!./src/player-panel.vue"),i=r('./node_modules/vue-loader/lib/template-compiler/index.js?{"id":"data-v-d9e86bf0","hasScoped":false,"transformToRequire":{"img":"src","image":"xlink:href","object":"data","use":"href"},"preserveWhitespace":false,"buble":{"transforms":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/player-panel.vue'),o=r("./node_modules/vue-loader/lib/component-normalizer.js"),a=n,l=o(s.a,i.a,!1,a,null,null);t.a=l.exports},"./src/remote-player.js":function(e,t,r){"use strict";var n=r("./node_modules/babel-runtime/regenerator/index.js"),s=r.n(n),i=r("./node_modules/babel-runtime/core-js/promise.js"),o=r.n(i),a=r("./node_modules/babel-runtime/helpers/asyncToGenerator.js"),l=r.n(a),u=r("./node_modules/babel-runtime/core-js/object/get-prototype-of.js"),c=r.n(u),d=r("./node_modules/babel-runtime/helpers/classCallCheck.js"),m=r.n(d),p=r("./node_modules/babel-runtime/helpers/createClass.js"),f=r.n(p),v=r("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),h=r.n(v),b=r("./node_modules/babel-runtime/helpers/inherits.js"),x=r.n(b),y=r("./src/model/chess/player.js"),g=function(e){function t(e,r,n,s){m()(this,t);var i=h()(this,(t.__proto__||c()(t)).call(this,r,n,s));return i.board=null,i.resolveMove=null,i.resolveInterruption=null,i.listenRemotePlayerMove(e),i.listenRemotePlayerInterruption(e),i}return x()(t,e),f()(t,[{key:"move",value:function(){function e(){return t.apply(this,arguments)}var t=l()(s.a.mark(function e(){var t=this;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new o.a(function(e){t.resolveMove=e}));case 1:case"end":return e.stop()}},e,this)}));return e}()},{key:"listenRemotePlayerMove",value:function(e){var t=this;e.collection("moves").orderBy("timestamp").onSnapshot(function(e){if(0!==e.size){var r=e.docs[e.size-1],n=r.data();if(n.plrId===t.id&&null!=t.resolveMove){var s=t.restoreMove(n.move);t.resolveMove(s),t.resolveMove=null}}})}},{key:"restoreMove",value:function(e){var t=JSON.parse(e),r={from:{x:7-t.from.x,y:7-t.from.y},to:{x:7-t.to.x,y:7-t.to.y}},n=this.board.cell(r.from.x,r.from.y);return r.piece=n.pieces.length>0?n.pieces[0]:null,r}},{key:"interrupt",value:function(){function e(){return t.apply(this,arguments)}var t=l()(s.a.mark(function e(){var t=this;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new o.a(function(e){t.resolveInterruption=e}));case 1:case"end":return e.stop()}},e,this)}));return e}()},{key:"listenRemotePlayerInterruption",value:function(e){var t=this;e.collection("interruptions").orderBy("timestamp").onSnapshot(function(e){for(var r=e.docs.length-1;r>=0;r--){var n=e.docs[r].data();if(n.plrId===t.id){var s=JSON.parse(n.interruption);null!=t.resolveInterruption&&(t.resolveInterruption(s),t.resolveInterruption=null);break}}})}}]),t}(y.a);t.a=g},"./src/ui-player.js":function(e,t,r){"use strict";var n=r("./node_modules/babel-runtime/regenerator/index.js"),s=r.n(n),i=r("./node_modules/babel-runtime/core-js/promise.js"),o=r.n(i),a=r("./node_modules/babel-runtime/helpers/asyncToGenerator.js"),l=r.n(a),u=r("./node_modules/babel-runtime/core-js/object/get-prototype-of.js"),c=r.n(u),d=r("./node_modules/babel-runtime/helpers/classCallCheck.js"),m=r.n(d),p=r("./node_modules/babel-runtime/helpers/createClass.js"),f=r.n(p),v=r("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),h=r.n(v),b=r("./node_modules/babel-runtime/helpers/inherits.js"),x=r.n(b),y=r("./node_modules/deep-equal/index.js"),g=r.n(y),_=r("./src/utils/event.js"),j=r("./src/model/chess/player.js"),k=function(e){function t(e,r,n,s){m()(this,t);var i=h()(this,(t.__proto__||c()(t)).call(this,r,n,s));return i.pieceSelectedEvent=new _.a,i.selectedPiece=null,i.resolveMove=null,i.resolveInterrupt=null,i.moving=!1,i.uiVm,i.onPieceClickedHandler=i.onPieceClicked.bind(i),e.$refs.board.$on("piece-clicked",i.onPieceClickedHandler),i.onCellClickedHandler=i.onCellClicked.bind(i),e.$refs.board.$on("cell-clicked",i.onCellClickedHandler),i.onUndoClicklHandler=i.finishWithUndoLastMove.bind(i),e.$on("undo-click",i.onUndoClicklHandler),i.onResignClickHandler=i.onResignClicked.bind(i),e.$on("resign-click",i.onResignClickHandler),i}return x()(t,e),f()(t,[{key:"move",value:function(){function e(){return t.apply(this,arguments)}var t=l()(s.a.mark(function e(){var t=this;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.moving=!0,e.abrupt("return",new o.a(function(e){t.resolveMove=e}));case 2:case"end":return e.stop()}},e,this)}));return e}()},{key:"onPieceClicked",value:function(e,t){this.moving&&(null===this.selectedPiece||e.color===this.color?(this.selectedPiece={piece:e,from:t},this.pieceSelectedEvent.emit(e,t)):this.finishNormalMove(t))}},{key:"onCellClicked",value:function(e){this.moving&&(null===this.selectedPiece||g()(this.selectedPiece.from,e)||this.finishNormalMove(e))}},{key:"finishNormalMove",value:function(e){this.finishMove({piece:this.selectedPiece.piece,from:this.selectedPiece.from,to:e})}},{key:"finishWithUndoLastMove",value:function(){this.finishMove({undoLastOpponentMove:!0})}},{key:"finishMove",value:function(e){null!=this.resolveMove&&this.resolveMove(e),this.moving=!1,this.resolveMove=null,this.selectedPiece=null}},{key:"detach",value:function(){this.uiVm.$refs.board.$off("piece-clicked",this.onPieceClickedHandler),this.uiVm.$refs.board.$off("cell-clicked",this.onCellClickedHandler),this.uiVm.$refs.board.$off("resign-clicked",this.onResignClickHandler),this.uiVm.$off("undo-click",this.onUndoClicklHandler)}},{key:"interrupt",value:function(){function e(){return t.apply(this,arguments)}var t=l()(s.a.mark(function e(){var t=this;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new o.a(function(e){t.resolveInterrupt=e}));case 1:case"end":return e.stop()}},e,this)}));return e}()},{key:"onResignClicked",value:function(){null!=this.resolveInterrupt&&(this.resolveInterrupt({type:"resignation"}),this.resolveInterrupt=null)}}]),t}(j.a);t.a=k},"./src/ui-utils/notification.vue":function(e,t,r){"use strict";function n(e){this.$style=r('./node_modules/extract-text-webpack-plugin/dist/loader.js?{"omit":1,"remove":true}!./node_modules/vue-style-loader/index.js!./node_modules/css-loader/index.js?{"minimize":true,"localIdentName":"[local]-[hash:base64:5]_0","importLoaders":true,"camelCase":true,"modules":true}!./node_modules/vue-loader/lib/style-compiler/index.js?{"vue":true,"id":"data-v-2f6f94cd","scoped":false,"hasInlineConfig":false}!./node_modules/vue-loader/lib/selector.js?type=styles&index=0!./src/ui-utils/notification.vue')}var s=r("./node_modules/babel-loader/lib/index.js!./node_modules/vue-loader/lib/selector.js?type=script&index=0!./src/ui-utils/notification.vue"),i=r('./node_modules/vue-loader/lib/template-compiler/index.js?{"id":"data-v-2f6f94cd","hasScoped":false,"transformToRequire":{"img":"src","image":"xlink:href","object":"data","use":"href"},"preserveWhitespace":false,"buble":{"transforms":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/ui-utils/notification.vue'),o=r("./node_modules/vue-loader/lib/component-normalizer.js"),a=n,l=o(s.a,i.a,!1,a,null,null);t.a=l.exports},"./src/ui-utils/prompt.vue":function(e,t,r){"use strict";function n(e){this.$style=r('./node_modules/extract-text-webpack-plugin/dist/loader.js?{"omit":1,"remove":true}!./node_modules/vue-style-loader/index.js!./node_modules/css-loader/index.js?{"minimize":true,"localIdentName":"[local]-[hash:base64:5]_0","importLoaders":true,"camelCase":true,"modules":true}!./node_modules/vue-loader/lib/style-compiler/index.js?{"vue":true,"id":"data-v-2a1fb27c","scoped":false,"hasInlineConfig":false}!./node_modules/vue-loader/lib/selector.js?type=styles&index=0!./src/ui-utils/prompt.vue')}var s=r("./node_modules/babel-loader/lib/index.js!./node_modules/vue-loader/lib/selector.js?type=script&index=0!./src/ui-utils/prompt.vue"),i=r('./node_modules/vue-loader/lib/template-compiler/index.js?{"id":"data-v-2a1fb27c","hasScoped":false,"transformToRequire":{"img":"src","image":"xlink:href","object":"data","use":"href"},"preserveWhitespace":false,"buble":{"transforms":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/ui-utils/prompt.vue'),o=r("./node_modules/vue-loader/lib/component-normalizer.js"),a=n,l=o(s.a,i.a,!1,a,null,null);t.a=l.exports},"./src/ui-utils/svg-effects/shadow.vue":function(e,t,r){"use strict";var n=r("./node_modules/babel-loader/lib/index.js!./node_modules/vue-loader/lib/selector.js?type=script&index=0!./src/ui-utils/svg-effects/shadow.vue"),s=r('./node_modules/vue-loader/lib/template-compiler/index.js?{"id":"data-v-96eee2b2","hasScoped":false,"transformToRequire":{"img":"src","image":"xlink:href","object":"data","use":"href"},"preserveWhitespace":false,"buble":{"transforms":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/ui-utils/svg-effects/shadow.vue'),i=r("./node_modules/vue-loader/lib/component-normalizer.js"),o=i(n.a,s.a,!1,null,null,null);t.a=o.exports},"./src/utils/date-utils.js":function(e,t,r){"use strict";function n(e,t){return e.getTime()<Date.now()-6e4*t}t.a=n},"./src/utils/event.js":function(e,t,r){"use strict";var n=r("./node_modules/babel-runtime/core-js/get-iterator.js"),s=r.n(n),i=r("./node_modules/babel-runtime/helpers/classCallCheck.js"),o=r.n(i),a=r("./node_modules/babel-runtime/helpers/createClass.js"),l=r.n(a),u=function(){function e(){o()(this,e),this.listeners=[]}return l()(e,[{key:"on",value:function(e,t){this.listeners.push({listener:e,callOn:t})}},{key:"off",value:function(e){for(var t=0;t<this.listeners;t++)if(this.listeners[t].listener===e){this.listeners.splice(t,1);break}}},{key:"emit",value:function(){var e=!0,t=!1,r=void 0;try{for(var n,i=s()(this.listeners);!(e=(n=i.next()).done);e=!0){var o=n.value;o.listener.apply(o.callOn,arguments)}}catch(e){t=!0,r=e}finally{try{!e&&i.return&&i.return()}finally{if(t)throw r}}}}]),e}();t.a=u},"./src/utils/wait.js":function(e,t,r){"use strict";var n=r("./node_modules/babel-runtime/core-js/promise.js"),s=r.n(n);t.a=function(e){return new s.a(function(t){return setTimeout(t,e)})}}},["./src/index.js"]);